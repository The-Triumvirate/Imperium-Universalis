# Hard-coded functions made fully or partly scripted
#
# Note that most functions use unique mechanics

# ROOT = country
can_join_hre_league = {
	condition = {
		tooltip = "CANNOT_JOIN_LEAGUE_AT_WAR"
		potential = {
		}
		allow = {
			is_at_war = no
		}
	}
}

can_leave_hre_league = {}

can_harsh_treatment = {}

can_reduce_war_exhaustion = {}

can_reduce_inflation = {}

can_declare_bankruptcy = {}

can_release_colonial_nation = {
	condition = {
		tooltip = "CAN_RELEASE_CN_WE_ARE_AT_WAR"
		potential = {
		}
		allow = {
			is_at_war = no
		}
	}
}

can_claim_defender_of_faith = {}

can_change_national_focus = {}

can_increase_stability = {}

# ROOT = province, FROM = country
can_add_province_to_hre = {
	condition = {
		tooltip = "APH_ONLY_CHINA"
		potential = {
		}
		allow = {
			continent = china
			religion_group = chinese_religions
		}
	}
}

can_remove_province_from_hre = {
	condition = {
		potential = {
			owner = { ai = yes }
		}
		allow = {
			owner = { NOT = { has_country_flag = permanently_left_hre_flag } }
		}
	}
}

can_increase_autonomy = {}

can_decrease_autonomy = {}

can_make_core = {}

can_abandon_state = {}

can_change_culture = {}

can_move_capital = {}

can_move_trade_port = {}

can_order_assault = {}

can_order_force_march = {}

can_scorch_earth = {}

can_garrison_sorties = {}

can_seize_colony = {}

can_burn_colony = {}

can_colonize_province = {}

can_colonize_province_siberian_frontier = {}

can_add_seat_in_parliament = {}

can_remove_seat_in_parliament = {}

can_add_estate = {}

#hardcoded: has a colonial parent or is in the same colonial region as the capital
can_have_colonial_nations = {
	condition = {
		potential = {
			always = no
		}
		allow = {
			always = no
		}
	}
}

### Special functions

# Called by can_add_province_to_hre
is_possible_hre_province = {
	condition = {
		tooltip = "APH_ONLY_CHINA"
		potential = {
		}
		allow = {
			continent = china
			religion_group = chinese_religions
		}
	}
}

will_demand_annexation = {
	condition = {
		potential = {
			is_elector = yes
		}
		allow = {
			NOT = { hre_reform_passed = landfriede }
		}
	}
}

can_make_state = {}

can_improve_tax = {
	condition = {
		tooltip = "AN_NO_SUBJECT_CENSUS"
		potential = {
    		owner = { is_subject = yes overlord = { ai = no } }
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
	condition = {
		tooltip = "AN_NO_ADM_PP"
		potential = {
    		NOT = { owner = { adm_power = 25 treasury = 25 } }
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
	condition = {
		tooltip = "AN_NO_AI_WEALTH"
		potential = {
    		owner = { ai = yes }
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
}

can_improve_production = {
	condition = {
		tooltip = "AN_DEV_CAPPED"
		potential = {
			#check that dev >= dev_cap
    		check_variable = {
        		which = AN_prov_infrastructure
        		which = AN_prov_infrastructure_cap
    		}
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
	condition = {
		tooltip = "AN_WEALTH_GREATER_INFRA"
		potential = {
			#check that wealth is greater than infra
			check_variable = {
				which = AN_prov_infrastructure
				which = AN_prov_wealth
    		}
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
	condition = {
		tooltip = "AN_NO_SUBJECT_CENSUS"
		potential = {
    		owner = { is_subject = yes overlord = { ai = no } }
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
	condition = {
		tooltip = "AN_NO_DIP_PP"
		potential = {
			NOT = { owner = { mil_power = 25 } }
		}
		#if yes to above, then always disallow
		allow = { always = no }
	}
}

# removed improve manpower here
can_improve_manpower = {			# both manpower and production buttons activate the province interaction menu
	condition = {
		tooltip = "NOT_POSSIBLE"
		potential = {
			always = yes
		}
		allow = {
			always = no
		}
	}

}
can_exploit_tax = {
	condition = {
		tooltip = "NOT_POSSIBLE"
		potential = {
			always = yes
		}
		allow = {
			always = no
		}
	}
}

can_exploit_production = {
	condition = {
		tooltip = "NOT_POSSIBLE"
		potential = {
			always = yes
		}
		allow = {
			always = no
		}
	}
}

can_exploit_manpower = {
	condition = {
		tooltip = "NOT_POSSIBLE"
		potential = {
			always = yes
		}
		allow = {
			always = no
		}
	}
}

can_expel_minority_from = {
	condition = {
		potential = {
			always = yes
		}
		allow = {
			always = no
		}
	}
}

can_join_hre = {
	condition = {
		tooltip = "PERMANENTLY_LEFT_HRE"
		potential = {
		}
		allow = {
			NOT = {
				has_country_flag = permanently_left_hre_flag
			}
		}
	}
}

can_leave_hre = {
}
