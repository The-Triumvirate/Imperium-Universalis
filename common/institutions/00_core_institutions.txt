# More Vanilla like institutions

#Table of contents

#	writing_system
#	iron_age
#	coin_usage
#	siege_engineering_institution
#	bureaucracy_institution
#	cast_iron_institution
#	classical_philosophy_institution
#	civil_law_institution
#	axiomatic_maths_institution
#	blast_furnace_institution
#	advanced_hydraulics_institution
#	astronomy_institution
#	engineering_architecture_institution
#	tactics_strategy_institution
#	elephant_domestication


#
# remember to add graphics for relevant ones when you add to this
#
# if a modifier is scaled, its multiplied with development in the province.

#######################################
# Writing System
#######################################

writing_system = {
	bonus = {
		administrative_efficiency = 0.05
	}
	trade_company_efficiency = 0.0

	history = {
		OR = {
			owned_by = TTQ
			owned_by = DAA
			AND = {
				culture_group = chinese_group
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			AND = {
				culture_group = thraco_phrygian_group
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			AND = {
				culture_group = anatolian_group
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			AND = {
				culture_group = hellenic_group
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			AND = {
				culture_group = indian_group
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			culture_group = minoan_group
			culture_group = semitic
			culture_group = akkadian_group
			culture_group = elamite_group
			culture_group = egyptian_group
			culture = latin
			culture = oscan
			culture = etruscan
			culture = lemnian
			culture = sabaean
			culture = gerrhan
			culture = meroitic
			culture = urartian
			culture = mannean
			culture = medians
			culture = persian
			culture = gutian
			culture = kassite
			culture = lullubi
			AND = {
				OR = {
					culture = lepontic
					culture_group = nuragic_group
				}
				is_year = 154
			}
			AND = {
				owned_by = PSE
				is_year = 204
			}
			AND = {
				culture_group = turdetani_group
				is_year = 210
			}
			AND = {
				OR = {
					culture_group = anatolian_group
					culture_group = thraco_phrygian_group
					culture_group = hellenic_group
					culture_group = chinese_group
				}
				is_year = 234
			}
			AND = {
				culture_group = iberian_group
				is_year = 250
			}
			AND = {
				OR = {
					culture = oenotrian
					culture_group = italic_group
					culture_group = etruscan_culture_group
					culture_group = arabic_group
				}
				is_year = 254
			}
			AND = {
				OR = {
					culture_group = dravidian_group
					culture_group = mleccha_group
					culture_group = macedon_group
				}
				is_year = 260
			}
			AND = {
				OR = {
					culture_group = armenian_group
					culture_group = caucasian_group
					culture_group = urarto_hurrian_group
				}
				is_year = 271
			}
			AND = {
				OR = {
					culture_group = western_iranian
					culture_group = eastern_iranian_group
				}
				is_year = 300
			}
			AND = {
				OR = {
					culture_group = mleccha_group
					culture_group = indian_group
					culture = chorasmian
					culture = odrysian
				}
				is_year = 354
			}
			AND = {
				culture_group = ibero_celtic_group
				is_year = 410
			}
			AND = {
				culture_group = north_african_group
				is_year = 454
			}
			AND = {
				culture = parni
				is_year = 513
			}
			AND = {
				is_year = 549
				owner = { TAG = XIO }
				is_core = XIO
				culture = xiongnu
			}
			AND = {
				is_year = 570
				OR = {
					culture = yemaek
					culture = ye
					culture = maek
				}
			}
			AND = {
				OR = {
					culture_group = eastern_celtic
					culture_group = gaulish_group
				}
				is_year = 600
			}
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = iu_institution_events.1
	
	can_embrace = {
		always = yes
	}

	embracement_speed = {
		
		modifier = {
			scale = yes
			factor = 0.6
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = { writing_system = 100 }
			}
		}
		modifier = {
			scale = yes
			factor = 0.3
			potential = { NOT = { any_friendly_coast_border_province = { writing_system = 100 } } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_coast_border_province_has_embraced_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					writing_system = 100
				}
			}
		}
		modifier = {
			scale = yes
			factor = 0.1
			potential = {
				is_capital = yes
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = skilled_ruler_adm
				is_capital = yes
				owner = {
					ADM = 6
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
		modifier = {
			factor = 0.075
			potential = {
				is_capital = yes
				owner = {
					neither_tribal_nor_native_trigger = yes
					advisor = scholar_advisor
				}
			}
			custom_trigger_tooltip = {
				tooltip = has_advisor_scholar_skill
				is_capital = yes
				owner = {
					neither_tribal_nor_native_trigger = yes
					OR  = {
						scholar_advisor = 1
						scholar_advisor = 2
						scholar_advisor = 3
					}
				}
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				owner = { absolutism = 15 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_absolutism_10
				owner = {
					absolutism = 15
					neither_tribal_nor_native_trigger = yes
				}
				any_neighbor_province = { writing_system = 100 }
			}
		}
		modifier = {
			factor = -0.3
			potential = {
				NOT = {
					owner = {
						has_institution = writing_system
						tribal_or_native_trigger = yes
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_isolated_illiterate_tribe
				owner = { tribal_or_native_trigger = yes }
				NOT = { any_neighbor_province = { writing_system = 100 } }
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income. (Or it has a more than long term goal...)
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.5
			is_at_war = yes
		}
	}
}

#######################################
# Ferrous Metallurgy
#######################################

iron_age = {
	bonus = {
		shock_damage_received = -0.05
	}
	trade_company_efficiency = 0.0

	history = {
		OR = {
			#Iberian iron age
			region = hispania_tarraconensis
			#Middle East iron age
			culture_group = semitic
			superregion = asia_superregion
			superregion = armenia_superregion
			superregion = arabia_superregion
			superregion = syria_superregion
			superregion = mesopotamia_superregion
			region = upper_egypt_region
			region = lower_egypt_region
			owned_by = KUS
			#Caucasian Iron age
			area = caucasus_east
			area = scythia_caspica
			area = ceraunian_mons_area
			area = caucasus_mons
			#Italian Iron age
			AND = {
				culture_group = italic_group
				NOT = { culture = liburni }
			}
			culture_group = etruscan_culture_group
			culture_group = nuragic_group
			culture = oenotrian
			culture = sicani
			culture = iapyges
			#Greek iron age
			culture_group = hellenic_group
			culture_group = macedon_group
			superregion = macedonia_superregion
			area = odryssia_area
			area = rhodope_area
			area = rhodope_mons_area
			area = oldenoi_area
			area = paeonia_area
			area = thracia_area
			#Iranian iron age
			superregion = iran_superregion
			culture_group = western_iranian
			culture = drangian
			culture = arian
			culture = pashtuns
			#Hallstat culture
			culture_group = eastern_celtic
			culture_group = gaulish_group
			#First iron in China produced in 900 BC
			culture_group = chinese_group
			culture = chidi
			culture = xirong
			culture = baidi
			culture = changdi
			#Indian iron age
			culture_group = indian_group
			culture = tamil
			culture = kambojas
			#Nok culture
			region = aethiopia_interior_region
			region = hesperia_aethiopia_region
			#Sa Huynh culture
			region = lacviet_region
			region = jiaozhou_china
			AND = {
				is_year = 180
				OR = {
					culture = neuri
					culture = finno_ugric
					culture_group = caucasian_group
					#Pazyryk Culture
					culture_group = eastern_iranian_group
				}
			}
			AND = {
				is_year = 200
				OR = {
					superregion = hispania_superregion
					superregion = parthia_superregion
					superregion = sakastan_superregion
					#Hallstat Influence
					superregion = italia_superregion
					region = illyria_region
					region = pannonia_region
					region = thracia_region
				}
			}
			AND = {
				is_year = 254
				OR = {
					region = aethiops
					region = erythrae_region
					region = nubia_region
					#Wu region produces iron
					culture = wuyue
					culture = gouwu
					#British Iron Age
					culture_group = britannic_group
				}
			}
			AND = {
				is_year = 300
				OR = {
					superregion = china_superregion
					superregion = uttarapatha_superregion
					superregion = dakshinapatha_superregion
					culture_group = ligures_group
					culture_group = north_atlantic_group
				}
			}
			AND = {
				is_year = 304
				OR = {
					region = burma_region
					region = upper_burma_region
					#Germanic Iron Age
					region = germania_region
				}
			}
			AND = {
				is_year = 352
				#Celtic expansion in Dacia
				OR = {
					region = dacia_region
					region = sarmatia_region
				}
			}
			AND = {
				is_year = 354
				OR = {
					superregion = scythia_superregion
					region = suebia_region
					region = germania_scandza_region
					#Oc Eo Culture
					region = champa_region
					region = dvaravati_region
					region = funan_region
				}
			}
			AND = {
				is_year = 454
				OR = {
					superregion = turan_superregion
					owned_by = ZHN
				}
			}
			AND = {
				is_year = 554
				OR = {
					superregion = chryse_insula_superregion
					region = suvarnadvipa_region
					region = malayadvipa_region
				}
			}
			AND = {
				#Wiman in Joseon
				is_year = 560
				owned_by = GOJ
			}
			AND = {
				#Samhan period
				is_year = 656
				superregion = korea_superregion
			}
			AND = {
				is_year = 754
				OR = {
					superregion = japan_superregion
					superregion = tibet_superregion
					superregion = suvarnabhumi_superregion
				}
			}
		}
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = iu_institution_events.1

	can_embrace = {
		always = yes
	}

	embracement_speed = {
		modifier = {
			scale = yes
			factor = 0.3
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = { iron_age = 100 }
			}
		}
		modifier = {
			scale = yes
			factor = 0.15
			potential = { NOT = { any_friendly_coast_border_province = { iron_age = 100 } } }
			custom_trigger_tooltip = {
				tooltip = tooltip_any_coast_border_province_has_embraced_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					iron_age = 100
				}
			}
		}
		modifier = {
			factor = 0.02
			scale = yes
			potential = {
				any_trade_node_member_province = { iron_age = 100 }
				province_has_center_of_trade_of_level = 1
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tradenode_prov_iron_age
				province_has_center_of_trade_of_level = 1
				any_trade_node_member_province = { iron_age = 100 }
			}
		}
		modifier = {
			factor = 0.025
			scale = yes
			force_potential = yes
			potential = { trade_goods = iron }
			custom_trigger_tooltip = {
				tooltip = tooltip_iron_province_miners
				trade_goods = iron
				development = 8
				OR = {
					has_building = miners_camp
					has_building = foundry
				}
			}
			owner = { absolutism = 10 }
		}
		modifier = {
			factor = 0.02
			scale = yes
			force_potential = yes
			potential = { trade_goods = iron }
			custom_trigger_tooltip = {
				tooltip = tooltip_iron_province_mine
				trade_goods = iron
				development = 10
				OR = {
					has_building = quarry
					has_building = small_mine
					has_building = big_mine
				}
				owner = { absolutism = 10 }
			}
		}
		modifier = {
			factor = 0.03
			scale = yes
			force_potential = yes
			potential = { trade_goods = metalware }
			custom_trigger_tooltip = {
				tooltip = tooltip_metalware_province_production
				trade_goods = metalware
				development = 8
				has_local_modifier_value = {
					which = local_production_efficiency
					value = 0.5
				}
			}
		}
		modifier = {
			factor = 0.03
			scale = yes
			potential = {
				is_capital = yes
				owner = { advisor = armor_smith }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_capital_master_smith
				is_capital = yes
				owner = {
					armor_smith = 3
					absolutism = 15
				}
			}
		}
		modifier = {
			factor = 0.025
			scale = yes
			potential = {
				is_capital = yes
				owner = { any_ally = { has_institution = iron_age } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_ally_iron_age
				is_capital = yes
				owner = { any_ally = { has_institution = iron_age } }
			}
		}
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				owner = { any_subject_country = { has_institution = iron_age } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_vassal_iron_age
				is_capital = yes
				owner = { any_subject_country = { has_institution = iron_age } }
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income. (Or it has a more than long term goal...)
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.5
			is_at_war = yes
		}
	}
}

#######################################
# Coin Usage
#######################################

coin_usage = {
	bonus = {
		global_tax_modifier = 0.1
	}
	trade_company_efficiency = 0.0
	
	historical_start_date = 150.1.1
	historical_start_province = 2158 #Sardis

	history = {
		OR = {
			AND = {
				OR = {
					culture_group = anatolian_group
					culture_group = indian_group
					culture_group = chinese_group
				}
				is_year = 150
			}
			AND = {
				OR = {
					culture_group = hellenic_group
					culture_group = minoan_group
					culture_group = macedon_group
					culture_group = etruscan_culture_group
				}
				OR = {
					region = greek_region
					region = mare_aegaeum_islands_region
					region = ionia_region
				}
				is_year = 200
			}
			AND = { #Cyrus the Great introduces coins to the Persian Empire
				OR = {
					superregion = iran_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = mesopotamia_superregion
					superregion = syria_superregion
					region = lower_egypt_region
					region = upper_egypt_region
					region = ariana_region
					region = parthia_region
					region = baktria_region
				}
				is_year = 211
			}
			AND = {
				OR = {
					culture_group = hellenic_group
					culture_group = semitic
					culture_group = arabic_group
				}
				is_year = 225
			}
			AND = { #Daric expands in Transoxiana and Dahaestan
				OR = {
					superregion = parthia_superregion
					superregion = sakastan_superregion
					superregion = scythia_superregion
				}
				is_year = 271
			}
			AND = {
				culture_group = dravidian_group
				is_year = 300
			}
			AND = {
				owned_by = BOS
				is_year = 319
			}
			AND = {
				culture_group = dacothracian_group
				is_year = 400
			}
			AND = {
				OR = {
					superregion = western_africa_superregion
					superregion = hispania_superregion
				}
				is_year = 425
			}
			AND = {
				OR = {
					culture_group = italic_group
					culture_group = etruscan_culture_group
					superregion = italia_superregion
					superregion = suvarnabhumi_superregion
				}
				is_year = 454
			}
			AND = {
				superregion = china_superregion
				is_year = 470
			}
			AND = {
				culture_group = eastern_celtic
				is_year = 480
			}
			AND = {
				culture_group = gaulish_group
				is_year = 550
			}
			AND = {
				owner = { is_tribal = no }
				is_year = 720
			}
		}
	}
	
	can_start = {
		is_year = 150
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_asia_flag }
				NOT = { has_global_flag = picked_disable_western_asia_flag }
				NOT = { has_global_flag = asia_superregion_compromised_flag }
				NOT = { is_year = 170 }
			}
			OR = {
				region = asia_minor
				region = ionia_region
				region = galatia_region
				region = lycia_pamphylia_region
				region = cilicia_region
			}
			is_state = yes
			province_has_center_of_trade_of_level = 2
			OR = {
				development = 8
				province_trade_power = 10
			}
			owner = { neither_tribal_nor_native_trigger = yes }
		}
		else_if = {
		    limit = {
			    is_year = 170
			}
			is_state = yes
			province_has_center_of_trade_of_level = 2
			OR = {
				development = 8
				province_trade_power = 10
			}
			OR = {
				trade_goods = gold
				trade_goods = silver
			}
			owner = {
			    neither_tribal_nor_native_trigger = yes
			}
		}
		else = {
			is_state = yes
			province_has_center_of_trade_of_level = 2
			OR = {
				development = 8
				province_trade_power = 10
			}
			OR = {
				trade_goods = gold
				trade_goods = silver
			}
			owner = {
			    neither_tribal_nor_native_trigger = yes
			}
		}
	}
	
	start_chance = 5
	
	on_start = iu_institution_events.1

	can_embrace = {
		always = yes
	}

	embracement_speed = {
		
		modifier = {
			scale = yes
			factor = 1.0
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = { coin_usage = 100 }
			}
		}
		modifier = {
			scale = yes
			factor = 0.75
			potential = {
				NOT = { any_friendly_coast_border_province = { coin_usage = 100 } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_coast_border_province_has_embraced_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					coin_usage = 100
				}
			}
		}
		modifier = {
			scale = yes
			factor = 1.5
			potential = {
				coin_usage = 1
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = skilled_ruler_adm
				owner = {
					ADM = 6
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
		modifier = {
			scale = yes
			factor = 0.1
			potential = {
				OR = {
					trade_goods = gold
					trade_goods = silver
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_gold_or_silver
				province_trade_power = 10
				OR = {
					trade_goods = gold
					trade_goods = silver
				}
			}
		}
		modifier = {
			scale = yes
			factor = 1.0
			potential = {
				always = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_tradenode_member_has_coinage10
				province_trade_power = 10
				any_trade_node_member_province = { 
					coin_usage = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				owner = { absolutism = 15 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_absolutism_10
				owner = {
					absolutism = 15
					neither_tribal_nor_native_trigger = yes
				}
				any_neighbor_province = { coin_usage = 100 }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				owner = { trade_income_percentage = 0.33 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_trade_income_not_native
				owner = {
					trade_income_percentage = 0.33
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				province_has_center_of_trade_of_level = 4
				NOT = { province_has_center_of_trade_of_level = 5 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_2_center_trade
				province_has_center_of_trade_of_level = 4
				NOT = { province_has_center_of_trade_of_level = 6 }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes
			potential = {
				province_has_center_of_trade_of_level = 6
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_3_center_trade
				province_has_center_of_trade_of_level = 6
			}
		}
		
		modifier = {
			factor = 0.15
			scale = yes
			potential = {
				owner = { gold_income_percentage = 0.25 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_gold_income_25
				owner = {
					gold_income_percentage = 0.25
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
		
		modifier = {
			scale = yes
			factor = 1.5
			potential = {
				owner = { has_institution = coin_usage }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_coinage_embrace
				owner = { has_institution = coin_usage }
				any_neighbor_province = { coin_usage = 100 }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Siege Engineering
#######################################
siege_engineering_institution = {

	bonus = {
		siege_ability = 0.1
		artillery_levels_available_vs_fort = 2
	}
	trade_company_efficiency = 0.0

	historical_start_date = 200.1.1
	historical_start_province = 2500 #Babylonia

	history = {
		OR = {
			AND = {
				is_year = 200
				region = mesopotamia_region
				region = haltamti_region
				region = assyria_region
			}
			AND = { #Cyrus the Great expansions
				OR = {
					superregion = iran_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = mesopotamia_superregion
					superregion = syria_superregion
					superregion = parthia_superregion
					region = lower_egypt_region
					region = upper_egypt_region
					region = baktria_region
				}
				is_year = 211
			}
			AND = {
				OR = {
					culture_group = chinese_group
					culture_group = dongyi_group
				}
				is_year = 240
			}
			AND = {
				superregion = sakastan_superregion
				is_year = 270
			}
			AND = {
				OR = {
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					superregion = scythia_superregion
				}
				is_year = 300
			}
			AND = {
				OR = {
					culture_group = hellenic_group
					culture_group = macedon_group
					superregion = macedonia_superregion
				}
				is_year = 395
			}
			AND = {
				OR = {
					superregion = arabia_superregion
					superregion = eastern_africa_superregion
					superregion = western_africa_superregion
					superregion = italia_superregion
				}
				is_year = 410
			}
			AND = {
				OR = {
					superregion = celtica_superregion
					superregion = hispania_superregion
					superregion = china_superregion
				}
				is_year = 450
			}
			AND = {
				OR = {
					superregion = aethiopia_superregion
					superregion = turan_superregion
				}
				is_year = 500
			}
		}
	}
	
	can_start = {
		is_year = 200
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_mesopotamia_flag }
				NOT = { has_global_flag = picked_disable_western_asia_flag }
				NOT = { has_global_flag = mesopotamia_superregion_compromised_flag }
				NOT = { is_year = 220 }
			}
			OR = {
				region = mesopotamia_region
				region = haltamti_region
				region = assyria_region
			}
			owner = {
				OR = {
					has_global_modifier_value = {
						which = siege_ability
						value = 0.15
					}
					is_year = 250
					army_tradition = 20
				}
			}
			OR = {
				has_building = small_city_walls
				has_building = large_city_walls
			}
		}
		else_if = {
		    limit = {
			    is_year = 220
			}
			owner = {
				OR = {
					has_global_modifier_value = {
						which = siege_ability
						value = 0.15
					}
					army_tradition = 20
				}
			}
			OR = {
				has_building = small_city_walls
				has_building = large_city_walls
			}
		}
		else = {
			owner = {
				OR = {
					has_global_modifier_value = {
						which = siege_ability
						value = 0.15
					}
					army_tradition = 20
				}
			}
			OR = {
				has_building = small_city_walls
				has_building = large_city_walls
			}
		}
	}
	start_chance = 5		#in 100 for when a province can_start

	on_start = iu_institution_events.2

	can_embrace = {
		always = yes
	}
	
	embracement_speed = {
		
		modifier = {
			factor = 0.4
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					siege_engineering_institution = 100
				}
			}
		}
		
		modifier = {
			scale = yes
			factor = 0.25
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						siege_engineering_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					siege_engineering_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = siege_ability
						value = 0.4
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_siege_ability
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = siege_ability
						value = 0.4
					}
				}
			}
		}


		modifier = {
			factor = 0.075
			scale = yes
			force_potential = yes
			potential = {
				is_capital = yes
				owner = {
					army_professionalism = 0.5
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_high_army_professionalism
				is_capital = yes
				owner = {
					army_professionalism = 0.5
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				owner = {
					has_leader_with = {
						general = yes
						siege = 3
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_leader_with_high_siege_ability
				is_capital = yes
				owner = {
					has_leader_with = {
						siege = 3
					}
				}
			}
		}

		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				development = 10
				owner = { full_idea_group = engineering_ideas }
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_engineering_ideas
				is_capital = yes
				development = 10
				owner = { full_idea_group = engineering_ideas }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Bureaucracy
#######################################
bureaucracy_institution = {
	bonus = {
		state_governing_cost = -0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 250.1.1
	historical_start_province = 2666 #Susa

	history = {
		OR = {
			AND = {
				is_year = 250
				OR = {
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = iran_superregion
					superregion = syria_superregion
					superregion = mesopotamia_superregion
					region = parthia_region
					region = ariana_region
					region = baktria_region
					region = transoxiana_region
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 250
				OR = {
					region = chorasmia_region
					region = fergana_region
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 270
				OR = {
					culture_group = chinese_group
					culture_group = hellenic_group
					culture_group = semitic
					culture_group = macedon_group
					culture_group = minoan_group
					culture_group = eastern_iranian_group
					culture_group = western_iranian
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 330
				OR = {
					superregion = eastern_africa_superregion
					culture_group = indian_group
					culture_group = italic_group
					culture_group = etruscan_culture_group
					region = arabia_felix_region
					region = arabia_petrea_region
					region = nubia_region
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 400
				OR = {
					superregion = china_superregion
					superregion = uttarapatha_superregion
					superregion = dakshinapatha_superregion
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 500
				OR = {
					superregion = italia_superregion
					superregion = macedonia_superregion
					region = africa_region
					region = arabia_deserta_region
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 600
				OR = {
					region = dangun_gojoseon_region
					region = yemaek_region
				}
				owner = { tribal_or_native_trigger = no }
			}
			AND = {
				is_year = 670
				OR = {
					superregion = hispania_superregion
					superregion = western_africa_superregion
				}
				owner = { tribal_or_native_trigger = no }
			}
		}
	}
	
	can_start = {
		is_year = 250
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_mesopotamia_flag }
				NOT = { has_global_flag = picked_disable_eran_flag }
				NOT = { has_global_flag = picked_disable_western_asia_flag }
				NOT = { has_global_flag = mesopotamia_superregion_compromised_flag }
				NOT = { has_global_flag = eran_superregion_compromised_flag }
				NOT = { is_year = 270 }
			}
			is_island = no
			is_state = yes
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
			}
			owner = {
				OR = {
					absolutism = 10
					num_of_cities = 30
				}
				total_development = 80
				tribal_or_native_trigger = no
			}
			OR = {
				region = haltamti_region
				superregion = iran_superregion
			}
		}
		else_if = {
		    limit = {
			    is_year = 270 
			}
			is_island = no
			is_state = yes
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
			}
			owner = {
				OR = {
					absolutism = 10
					num_of_cities = 30
				}
				total_development = 80
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_island = no
			is_state = yes
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
			}
			owner = {
				OR = {
					absolutism = 10
					num_of_cities = 30
				}
				total_development = 80
				tribal_or_native_trigger = no
			}
		}
	}
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.3
	
	
	can_embrace = {
		owner = { has_institution = writing_system }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.2
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					bureaucracy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						bureaucracy_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					bureaucracy_institution = 100
				}
			}
		}

		modifier = {
			factor = -0.1
			scale = yes
			potential = {
				owner = { tribal_or_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tribal_government
				owner = { tribal_or_native_trigger = yes }
			}
		}
		
		modifier = {
			factor = -0.05
			force_potential = yes
			potential = {
				owner = { has_estate = estate_nobility }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bureaucracy_nobility
				any_neighbor_province = {
					bureaucracy_institution = 100
				}
				owner = {
					has_estate = estate_nobility
					estate_loyalty = {
						estate = estate_nobility
						loyalty = 40
					}
					OR = {
						estate_territory = {
							estate = estate_nobility
							territory = 30
						}
						estate_influence = {
							estate = estate_nobility
							influence = 40
						}
					}
				}
			}
		}

		modifier = {
			factor = -0.1
			scale = yes
			force_potential = yes
			potential = {
				local_autonomy = 50
				is_state = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_has_high_autonomy
				local_autonomy = 50
				is_state = yes
			}
		}

		modifier = {
			factor = -0.2
			scale = yes
			force_potential = yes
			potential = {
				is_territory = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_is_territory
				is_territory = yes
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes
			potential = {
				NOT = { local_autonomy = 25 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_autonomy_less_25
				NOT = { local_autonomy = 10 }
				any_neighbor_province = { bureaucracy_institution = 100 }
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			potential = {
				is_capital = yes
				development = 20
				owner = { OR = { has_reform = centralized_bureaucracy } }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_centralized_bureaucracy_reform
				is_capital = yes
				development = 20
				owner = { OR = { has_reform = centralized_bureaucracy } }
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			force_potential = yes
			potential = {
				is_capital = yes
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_absolutism
				owner = { absolutism = 30 }
			}
		}
		
		modifier = {
			factor = 0.15
			potential = {
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = administrative_efficiency
						value = 0.2
					}
					neither_tribal_nor_native_trigger = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_admin_efficiency
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = administrative_efficiency
						value = 0.2
					}
				}
			}
		}

		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes
			potential = {
				is_capital = yes
				development = 10
				owner = {
					adm = 5
					neither_tribal_nor_native_trigger = yes
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_adm_ruler
				is_capital = yes
				development = 10
				owner = {
					adm = 5
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				owner = { has_institution = writing_system }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_writing_system_embraced
				is_capital = yes
				development = 20
				owner = { has_institution = writing_system }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				owner = { has_institution = bureaucracy_institution }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bureaucracy_embraced
				owner = { has_institution = bureaucracy_institution }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 20
				owner = { full_idea_group = administrative_ideas }
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_administrative_ideas
				is_capital = yes
				development = 20
				owner = { full_idea_group = administrative_ideas }
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes
			potential = {
				is_capital = yes
				owner = {
					num_of_provinces_in_states = 50
					neither_tribal_nor_native_trigger = yes
				}
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_more_50_provinces
				is_capital = yes
				owner = {
					num_of_provinces_in_states = 50
					neither_tribal_nor_native_trigger = yes
				}
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Cast Iron
#######################################
cast_iron_institution = {
	bonus = {
		production_efficiency = 0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 300.1.1
	historical_start_province = 4349 #Chengzhou

	history = {
		OR = {
			AND = {
				is_year = 300
				superregion = china_superregion
			}
			AND = {
				is_year = 325
				OR = {
					superregion = turan_superregion
					superregion = hispania_superregion
					superregion = iran_superregion
				}
			}
			AND = {
				is_year = 350
				OR = {
					superregion = aethiopia_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = celtica_superregion
				}
			}
			AND = {
				is_year = 375
				OR = {
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					superregion = macedonia_superregion
					superregion = haemusia_superregion
					superregion = italia_superregion
				}
			}
			AND = {
				is_year = 400
				OR = {
					superregion = parthia_superregion
					superregion = scythia_superregion
					superregion = britannia_superregion
					superregion = western_africa_superregion
					superregion = eastern_africa_superregion
				}
			}
			AND = {
				is_year = 500
				superregion = germania_superregion
			}
			AND = {
				is_year = 620
				OR = {
					superregion = chryse_insula_superregion
					superregion = suvarnabhumi_superregion
				}
			}
			AND = {
				is_year = 670
				superregion = korea_superregion
			}
		}
	}
	
	can_start = {
		is_year = 300
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_china_flag }
				NOT = { has_global_flag = picked_disable_eastern_asia_flag }
				NOT = { has_global_flag = china_superregion_compromised_flag }
				NOT = { is_year = 320 }
			}
			is_state = yes
			culture_group = chinese_group
			superregion = china_superregion
			trade_goods = iron
		}
		else_if = {
		    limit = {
			    is_year = 320
			}
			is_state = yes
			owner = { neither_tribal_nor_native_trigger = yes }
			OR = {
			    trade_goods = iron
				trade_goods = metalware
			}
		}
		else = {
			is_state = yes
			owner = { neither_tribal_nor_native_trigger = yes }
			OR = {
			    trade_goods = iron
				trade_goods = metalware
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.4
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
		modifier = {
			factor = -2
			custom_trigger_tooltip = {
				tooltip = tooltip_bronze_age
				NOT = { iron_age = 100 }
			}
		}
		modifier = {
			factor = 0.7
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					cast_iron_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.35
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						cast_iron_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					cast_iron_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				province_has_center_of_trade_of_level = 4
				owner = { mil_tech = 12 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_12_mil_tech
				is_capital = yes
				province_has_center_of_trade_of_level = 4
				owner = { mil_tech = 12 }
			}
		}
		
		modifier = {
			factor = 0.125
			scale = yes
			potential = {
				trade_goods = iron
				province_trade_power = 14
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_iron_producing_province
				trade_goods = iron
				province_trade_power = 14
			}
		}
		
		modifier = {
			factor = 0.4
			scale = yes
			potential = {
				owner = {
					production_leader = {
						trade_goods = iron
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_iron_world_leader
				is_capital = yes
				owner = {
					production_leader = {
						trade_goods = iron
					}
				}
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Classical Philosophy
#######################################
classical_philosophy_institution = {
	bonus = {
		idea_cost = -0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 350.1.1
	historical_start_province = 959 #Athens

	history = {
		OR = {
			AND = {
				is_year = 350
				OR = {
					superregion = macedonia_superregion
					superregion = china_superregion
					superregion = uttarapatha_superregion
					superregion = dakshinapatha_superregion
					culture_group = hellenic_group
					culture_group = macedon_group
					culture_group = minoan_group
					culture_group = semitic
				}
			}
			AND = {
				is_year = 400
				OR = {
					superregion = italia_superregion
					superregion = asia_superregion
					superregion = syria_superregion
					region = lower_egypt_region
					region = upper_egypt_region
				}
			}
			AND = {
				is_year = 450
				OR = {
					superregion = mesopotamia_superregion
					superregion = iran_superregion
					superregion = armenia_superregion
				}
			}
			AND = {
				is_year = 450
				OR = {
					superregion = arabia_superregion
					superregion = sakastan_superregion
					superregion = parthia_superregion
				}
			}
			AND = {
				is_year = 650
				OR = {
					superregion = hispania_superregion
					superregion = western_africa_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 350
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_macedonia_flag }
				NOT = { has_global_flag = picked_disable_europe_flag }
				NOT = { has_global_flag = macedonia_superregion_compromised_flag }
				NOT = { is_year = 370 }
			}
			is_state = yes
			culture_group = hellenic_group
			base_tax = 1
			base_production	= 1
			superregion = macedonia_superregion
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else_if = {
		    limit = {
			    is_year = 370
			}
			is_state = yes
			base_tax = 2
			base_production	= 6
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_state = yes
			base_tax = 2
			base_production	= 6
			owner = {
				tribal_or_native_trigger = no
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.5
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.5
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					classical_philosophy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						classical_philosophy_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					classical_philosophy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			potential = {
				is_capital = yes
				development = 15
				owner = { has_institution = writing_system }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_writing_system_embraced_15_dev
				is_capital = yes
				development = 15
				owner = { has_institution = writing_system }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 12
				owner = { advisor = scholar_advisor }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_scholar_advisor
				is_capital = yes
				development = 12
				owner = { advisor = scholar_advisor }
			}
		}
		
		modifier = {
			factor = 0.15
			scale = yes
			potential = {
				is_capital = yes
				development = 10
				owner = { advisor = philosopher_adv }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_philosopher_advisor
				development = 10
				is_capital = yes
				owner = { advisor = philosopher_adv }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				is_capital = yes
				development = 18
				owner = { full_idea_group = academy_ideas }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_full_academy_ideas
				is_capital = yes
				development = 18
				owner = { full_idea_group = academy_ideas }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			force_potential = yes
			potential = {
				culture_group = hellenic_group
				OR = {
					superregion = macedonia_superregion
					superregion = asia_superregion
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_greek_in_greece
				culture_group = hellenic_group
				OR = {
					superregion = macedonia_superregion
					superregion = asia_superregion
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				NOT = { superregion = macedonia_superregion }
				NOT = { superregion = asia_superregion }
				culture_group = hellenic_group
				owner = { culture_group = hellenic_group }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_greek_owner
				NOT = { superregion = macedonia_superregion }
				NOT = { superregion = asia_superregion }
				culture_group = hellenic_group
				owner = { culture_group = hellenic_group }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				has_building = philosophers_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_philosophers_academy
				is_capital = yes
				has_building = philosophers_academy
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				is_capital = no
				province_trade_power = 16
				has_building = philosophers_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_philosophers_academy
				is_capital = no
				province_trade_power = 16
				has_building = philosophers_academy
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Civil Law
#######################################
civil_law_institution = {

	bonus = {
		yearly_corruption = -0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 400.1.1
	historical_start_province = 53 #Rome

	history = {
		OR = {
			AND = {
				is_year = 400
				OR = {
					superregion = italia_superregion
					culture_group = italic_group
				}
			}
			AND = {
				is_year = 450
				OR = {
					superregion = macedonia_superregion
					superregion = syria_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = mesopotamia_superregion
					superregion = iran_superregion
					superregion = eastern_africa_superregion
					culture_group = hellenic_group
					culture_group = macedon_group
					culture_group = minoan_group
				}
			}
			AND = {
				is_year = 500
				OR = {
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					superregion = western_africa_superregion
					superregion = china_superregion
					superregion = parthia_superregion
					superregion = sakastan_superregion
				}
			}
			AND = {
				is_year = 570
				superregion = korea_superregion
			}
			AND = {
				is_year = 600
				superregion = hispania_superregion
			}
			AND = {
				is_year = 720
				superregion = celtica_superregion
			}
		}
	}
	
	can_start = {
		is_year = 400
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_italia_flag }
				NOT = { has_global_flag = picked_disable_europe_flag }
				NOT = { has_global_flag = italia_superregion_compromised_flag }
				NOT = { is_year = 420 }
			}
			is_state = yes
			base_tax = 1
			base_production	= 1
			superregion = italia_superregion
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else_if = {
		    limit = {
			    is_year = 420
			}
			is_state = yes
			base_tax = 2
			base_production	= 6
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_state = yes
			base_tax = 2
			base_production	= 6
			owner = {
				tribal_or_native_trigger = no
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.6
	
	
	can_embrace = {
		owner = { has_institution = writing_system }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					civil_law_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						civil_law_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					civil_law_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.15
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				OR = {
					has_building = government_palace
					has_building = government_district
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_government_buildings
				is_capital = yes
				development = 30
				OR = {
					has_building = government_palace
					has_building = government_district
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				NOT = { local_autonomy = 10 }
				owner = { neither_tribal_nor_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_autonomy_less_25
				NOT = { local_autonomy = 10 }
				any_neighbor_province = { civil_law_institution = 100 }
			}
		}
		
		modifier = {
			factor = 0.2
			scale = yes
			potential = {
				is_capital = yes
				development = 28
				owner = {
					OR = {
						has_reform = written_law_reform
						has_reform = twelve_tables_reform
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_written_laws_refrom
				is_capital = yes
				development = 28
				owner = {
					OR = {
						has_reform = written_law_reform
						has_reform = twelve_tables_reform
					}
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 24
				owner = {
					full_idea_group = domestic_government_ideas
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_full_domestic_government_ideas
				is_capital = yes
				development = 24
				owner = {
					full_idea_group = domestic_government_ideas
				}
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			potential = {
				has_owner_culture = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_has_owner_culture
				has_owner_culture = yes
				any_friendly_coast_border_province = {
					civil_law_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				owner = { absolutism = 50 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_absolutism_50
				owner = { absolutism = 50 }
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				owner = { has_institution = bureaucracy_institution }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_bureaucracy_embraced_2
				is_capital = yes
				development = 30
				owner = { has_institution = bureaucracy_institution }
			}
		}
		
		modifier = {
			factor = 1.0
			scale = yes
			potential = {
				owner = { is_roman_country_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_is_rome
				owner = { is_roman_country_trigger = yes }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Axiomatic Maths
#######################################
axiomatic_maths_institution = {

	bonus = {
		technology_cost = -0.05
	}

	trade_company_efficiency = 0.0

	historical_start_date = 450.1.1
	historical_start_province = 728 #Alexandria

	history = {
		OR = {
			AND = {
				is_year = 450
				OR = {
					superregion = eastern_africa_superregion
					superregion = macedonia_superregion
					superregion = syria_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = mesopotamia_superregion
					superregion = china_superregion
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					culture_group = hellenic_group
					culture_group = semitic
					culture_group = macedon_group
					culture_group = minoan_group
				}
			}
			AND = {
				is_year = 500
				OR = {
					superregion = western_africa_superregion
					superregion = arabia_superregion
					superregion = iran_superregion
					superregion = parthia_superregion
					superregion = sakastan_superregion
				}
			}
			AND = {
				is_year = 600
				superregion = korea_superregion
			}
			AND = {
				is_year = 730
				OR = {
					superregion = hispania_superregion
					superregion = celtica_superregion
					superregion = britannia_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 450
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_libya_orientalis_flag }
				NOT = { has_global_flag = picked_disable_africa_flag }
				NOT = { has_global_flag = libya_orientalis_superregion_compromised_flag }
				NOT = { is_year = 470 }
			}
			is_state = yes
			development = 12
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
				has_building = mathematician_academy
				has_building = library
				has_building = great_library
				is_year = 500
			}
			OR = {
				region = lower_egypt_region
				region = upper_egypt_region
			}
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else_if = {
		    limit = {
			    is_year = 470
			}
			is_state = yes
			development = 12
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
				has_building = mathematician_academy
				has_building = library
				has_building = great_library
			}
			owner = {
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_state = yes
			development = 12
			OR = {
				has_building = small_townhall
				has_building = big_townhall
				has_building = government_palace
				has_building = government_district
				has_building = mathematician_academy
				has_building = library
				has_building = great_library
			}
			owner = {
				tribal_or_native_trigger = no
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.7
	
	
	can_embrace = {
		owner = { has_institution = writing_system }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 1.0
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					axiomatic_maths_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.5
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						axiomatic_maths_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					axiomatic_maths_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				OR = {
					has_building = library
					has_building = great_library
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_building_library
				OR = {
					has_building = library
					has_building = great_library
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				has_owner_culture = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_has_owner_culture
				has_owner_culture = yes
				any_friendly_coast_border_province = {
					axiomatic_maths_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				has_building = mathematician_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_math_academy
				is_capital = yes
				has_building = mathematician_academy
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				is_capital = no
				province_trade_power = 30
				has_building = mathematician_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_math_academy
				is_capital = no
				province_trade_power = 30
				has_building = mathematician_academy
			}
		}

		modifier = {
			factor = -0.1
			scale = yes
			potential = {
				owner = { tribal_or_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tribal_government
				owner = { tribal_or_native_trigger = yes }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}


#######################################
# Blast Furnace
#######################################
blast_furnace_institution = {

	bonus = {
		global_trade_goods_size_modifier = 0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 500.1.1
	historical_start_province = 4195 #Xiangyang

	history = {
		OR = {
			AND = {
				is_year = 500
				superregion = china_superregion
			}
			AND = {
				is_year = 525
				OR = {
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
				}
			}
			AND = {
				is_year = 550
				OR = {
					superregion = parthia_superregion
					superregion = sakastan_superregion
					superregion = iran_superregion
					superregion = scythia_superregion
					superregion = aethiopia_superregion
				}
			}
			AND = {
				is_year = 600
				OR = {
					superregion = mesopotamia_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = syria_superregion
					superregion = arabia_superregion
					superregion = eastern_africa_superregion
					superregion = turan_superregion
				}
			}
			AND = {
				is_year = 650
				OR = {
					superregion = celtica_superregion
					superregion = haemusia_superregion
					superregion = macedonia_superregion
					superregion = italia_superregion
					superregion = western_africa_superregion
				}
			}
			AND = {
				is_year = 700
				OR = {
					superregion = hispania_superregion
					superregion = germania_superregion
					superregion = korea_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 500
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_china_flag }
				NOT = { has_global_flag = picked_disable_eastern_asia_flag }
				NOT = { has_global_flag = china_superregion_compromised_flag }
				NOT = { is_year = 520 }
			}
			is_state = yes
			development = 6
			superregion = china_superregion
			culture_group = chinese_group
			owner = {
				neither_tribal_nor_native_trigger = yes
				iron = 1
				OR = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.4
					}
					is_year = 550
				}
				OR = {
					quarry = 4
					small_mine = 2
					big_mine = 1
				}
			}
		}
		else_if = {
		    limit = {
			    is_year = 520
			}
			is_state = yes
			development = 6
			owner = {
				tribal_or_native_trigger = no
				OR = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.4
					}
					is_year = 530
				}
				OR = {
					quarry = 4
					small_mine = 2
					big_mine = 1
				}
			}
			OR = {
			    trade_goods = copper
				trade_goods = iron
				trade_goods = lead
				trade_goods = tin
			}
		}
		else = {
			is_state = yes
			development = 6
			owner = {
				tribal_or_native_trigger = no
				OR = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.4
					}
					is_year = 530
				}
				OR = {
					quarry = 4
					small_mine = 2
					big_mine = 1
				}
			}
			OR = {
			    trade_goods = copper
				trade_goods = iron
				trade_goods = lead
				trade_goods = tin
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.8
	
	
	can_embrace = {
		owner = { has_institution = cast_iron_institution }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = -2
			custom_trigger_tooltip = {
				tooltip = tooltip_bronze_age
				NOT = { iron_age = 100 }
			}
		}
		modifier = {
			factor = 0.6
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					blast_furnace_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.3
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						blast_furnace_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					blast_furnace_institution = 100
				}
			}
		}

		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				province_trade_power = 40
				trade_goods = metalware
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_high_trade_capital_metalware_manufactory
				is_capital = yes
				province_trade_power = 40
				trade_goods = metalware
				has_building = blacksmith
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Advanced Hydraulics
#######################################
advanced_hydraulics_institution = {
	bonus = {
		manpower_recovery_speed = 0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 550.1.1
	historical_start_province = 2322 #Antiocheia

	history = {
		OR = {
			AND = {
				is_year = 550
				OR = {
					superregion = syria_superregion
					superregion = mesopotamia_superregion
					superregion = sakastan_superregion
					superregion = eastern_africa_superregion
					superregion = china_superregion
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					superregion = arabia_superregion
				}
			}
			AND = {
				is_year = 575
				OR = {
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = iran_superregion
					superregion = parthia_superregion
				}
			}
			AND = {
				is_year = 600
				OR = {
					superregion = macedonia_superregion
					superregion = western_africa_superregion
					superregion = italia_superregion
				}
			}
			AND = {
				is_year = 650
				OR = {
					superregion = hispania_superregion
					superregion = celtica_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 550
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_transeuphratia_flag }
				NOT = { has_global_flag = picked_disable_western_asia_flag }
				NOT = { has_global_flag = transeuphratia_superregion_compromised_flag }
				NOT = { is_year = 570 }
			}
			is_state = yes
			development = 7
			superregion = syria_superregion
			OR = {
				trade_goods = grain
				trade_goods = fruits
				trade_goods = rice
				trade_goods = olive
				trade_goods = wine
				trade_goods = sugar
			}
			OR = {
				has_building = small_water_irrigation
				has_building = big_water_irrigation
				has_building = big_estate
			}
			OR = {
				is_year = 600
				owner = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.5
					}
				}
			}
		}
		else_if = {
		    limit = {
			    is_year = 570
			}
			is_state = yes
			development = 7
			OR = {
				trade_goods = grain
				trade_goods = fruits
				trade_goods = rice
				trade_goods = olive
				trade_goods = wine
				trade_goods = sugar
			}
			OR = {
				has_building = small_water_irrigation
				has_building = big_water_irrigation
				has_building = big_estate
			}
			OR = {
				is_year = 600
				owner = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.5
					}
				}
			}
		}
		else = {
			is_state = yes
			development = 7
			OR = {
				trade_goods = grain
				trade_goods = fruits
				trade_goods = rice
				trade_goods = olive
				trade_goods = wine
				trade_goods = sugar
			}
			OR = {
				has_building = small_water_irrigation
				has_building = big_water_irrigation
				has_building = big_estate
			}
			OR = {
				is_year = 600
				owner = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.5
					}
				}
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.9
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.5
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					advanced_hydraulics_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						advanced_hydraulics_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					advanced_hydraulics_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				province_trade_power = 20
				OR = {
					has_building = small_water_irrigation
					has_building = big_water_irrigation
					has_building = big_estate
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_agriculture_building
				province_trade_power = 20
				OR = {
					has_building = small_water_irrigation
					has_building = big_water_irrigation
					has_building = big_estate
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.7
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_high_efficiency
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = production_efficiency
						value = 0.7
					}
				}
			}
		}
		
		modifier = {
			factor = 0.33
			scale = yes
			potential = {
				owner = {
					OR = {
						production_leader = {
							trade_goods = grain
						}
						production_leader = {
							trade_goods = fruits
						}
						production_leader = {
							trade_goods = rice
						}
						production_leader = {
							trade_goods = olive
						}
						production_leader = {
							trade_goods = wine
						}
						production_leader = {
							trade_goods = sugar
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_agriculture_production
				is_capital = yes
				owner = {
					OR = {
						production_leader = {
							trade_goods = grain
						}
						production_leader = {
							trade_goods = fruits
						}
						production_leader = {
							trade_goods = rice
						}
						production_leader = {
							trade_goods = olive
						}
						production_leader = {
							trade_goods = wine
						}
						production_leader = {
							trade_goods = sugar
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				owner = { full_idea_group = agraculture_ideas }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_full_agriculture_ideas
				is_capital = yes
				development = 30
				owner = { full_idea_group = agraculture_ideas }
			}
		}
		
		modifier = {
			factor = -0.05
			scale = yes
			force_potential = yes
			potential = {
				has_climate	= arid
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_climate_arid
				has_climate	= arid
			}
		}
		
		modifier = {
			factor = 0.075
			scale = yes
			force_potential = yes
			potential = {
				province_trade_power = 35
				is_farmland_terrain = yes
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_is_farmland
				province_trade_power = 35
				is_farmland_terrain = yes
			}
		}
		
		modifier = {
			factor = -0.1
			scale = yes
			force_potential = yes
			potential = {
				OR = {
					has_terrain = desert
					has_terrain = salt_desert
					has_terrain = coastal_desert
					has_terrain = desert_mountain
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_terrain_not_good
				OR = {
					has_terrain = desert
					has_terrain = salt_desert
					has_terrain = coastal_desert
					has_terrain = desert_mountain
				}
			}
		}
		
		modifier = {
			factor = -0.04
			scale = yes
			force_potential = yes
			potential = {
				OR = {
					has_terrain = steppe
					has_terrain = savannah
					has_terrain = forest_steppe
					has_terrain = oasis
					has_terrain = siwa_t
					has_terrain = desert_river
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_terrain_not_that_bad
				OR = {
					has_terrain = steppe
					has_terrain = savannah
					has_terrain = forest_steppe
					has_terrain = oasis
					has_terrain = siwa_t
					has_terrain = desert_river
				}
			}
		}
		
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Astronomy
#######################################
astronomy_institution = {

	bonus = {
		range = 0.25
		envoy_travel_time = -0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 600.1.1
	historical_start_province = 945 #Corinth

	history = {
		OR = {
			AND = {
				is_year = 600
				OR = {
					superregion = macedonia_superregion
					superregion = eastern_africa_superregion
					superregion = western_africa_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = mesopotamia_superregion
					superregion = arabia_superregion
					superregion = italia_superregion
					superregion = china_superregion
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
				}
			}
			AND = {
				is_year = 650
				OR = {
					superregion = iran_superregion
					superregion = parthia_superregion
					superregion = sakastan_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 600
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_macedonia_flag }
				NOT = { has_global_flag = picked_disable_europe_flag }
				NOT = { has_global_flag = macedonia_superregion_compromised_flag }
				NOT = { is_year = 620 }
			}
			is_state = yes
			development = 5
			superregion = macedonia_superregion
			culture_group = hellenic_group
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
		else_if = {
		    limit = {
			    is_year = 620
			}
			is_state = yes
			development = 15
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_state = yes
			development = 15
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.10
	
	
	can_embrace = {
		owner = { has_institution = axiomatic_maths_institution }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 1.1
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					astronomy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.75
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						astronomy_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					astronomy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = -0.1
			scale = yes
			potential = {
				owner = { tribal_or_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tribal_government
				owner = { tribal_or_native_trigger = yes }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				owner = { has_institution = axiomatic_maths_institution }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_axiomatic_maths_embraced
				is_capital = yes
				development = 30
				owner = { has_institution = axiomatic_maths_institution }
			}
		}
		
		modifier = {
			factor = 0.15
			scale = yes
			potential = {
				is_capital = yes
				base_tax = 10
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_8_tax
				is_capital = yes
				base_tax = 10
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				OR = {
					culture_group = hellenic_group
					culture_group = akkadian_group
					culture_group = italic_group
					culture_group = etruscan_culture_group
					culture_group = semitic
					culture_group = etruscan_culture_group
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_akkadian_greek
				OR = {
					culture_group = hellenic_group
					culture_group = akkadian_group
					culture_group = italic_group
					culture_group = etruscan_culture_group
					culture_group = semitic
					culture_group = etruscan_culture_group
				}
				any_neighbor_province = { astronomy_institution = 100 }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Engineering and Architecture
#######################################
engineering_architecture_institution = {

	bonus = {
		build_cost = -0.1
		build_time = -0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 650.1.1
	historical_start_province = 10 #Syracuse

	history = {
		OR = {
			AND = {
				is_year = 650
				OR = {
					superregion = italia_superregion
					superregion = macedonia_superregion
					superregion = western_africa_superregion
					superregion = eastern_africa_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = syria_superregion
					superregion = mesopotamia_superregion
					superregion = sakastan_superregion
					superregion = parthia_superregion
					superregion = iran_superregion
					superregion = uttarapatha_superregion
					superregion = dakshinapatha_superregion
					superregion = china_superregion
				}
			}
			AND = {
				is_year = 675
				OR = {
					superregion = arabia_superregion
					superregion = hispania_superregion
				}
			}
			AND = {
				is_year = 720
				OR = {
					superregion = haemusia_superregion
					superregion = celtica_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 650
		if = {
			limit = {
				NOT = { has_global_flag = picked_disable_italia_flag }
				NOT = { has_global_flag = picked_disable_europe_flag }
				NOT = { has_global_flag = italia_superregion_compromised_flag }
				NOT = { is_year = 670 }
			}
			is_state = yes
			province_has_center_of_trade_of_level = 1
			superregion = italia_superregion
			OR = {
				culture_group = hellenic_group
				culture_group = italic_group
				culture_group = etruscan_culture_group
			}
			OR = {
				has_building = gravel_road
				has_building = paved_road
				has_building = imperial_road
			}
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
		else_if = {
		    limit = {
			    is_year = 670
			}
			is_state = yes
			province_has_center_of_trade_of_level = 1
			OR = {
				has_building = gravel_road
				has_building = paved_road
				has_building = imperial_road
			}
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
		else = {
			is_state = yes
			province_has_center_of_trade_of_level = 1
			OR = {
				has_building = gravel_road
				has_building = paved_road
				has_building = imperial_road
			}
			owner = {
				has_institution = axiomatic_maths_institution
				tribal_or_native_trigger = no
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.11
	
	
	can_embrace = {
		owner = { has_institution = axiomatic_maths_institution }
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 0.8
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					engineering_architecture_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.4
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						engineering_architecture_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					engineering_architecture_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = build_cost
						value = -0.3
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_cheap_construction
				is_capital = yes
				owner = {
					has_global_modifier_value = {
						which = build_cost
						value = -0.3
					}
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				owner = { has_institution = axiomatic_maths_institution }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_axiomatic_maths_embraced
				is_capital = yes
				development = 30
				owner = { has_institution = axiomatic_maths_institution }
			}
		}
		
		modifier = {
			factor = -0.05
			scale = yes
			force_potential = yes
			potential = {
				OR = {
					has_terrain = mountain
					has_terrain = highlands
					has_terrain = desert_mountain
					has_terrain = fertile_highlands
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_accidented_terrain
				OR = {
					has_terrain = mountain
					has_terrain = highlands
					has_terrain = desert_mountain
					has_terrain = fertile_highlands
				}
			}
		}
		
		modifier = {
			factor = 0.025
			scale = yes
			potential = {
				OR = {
					has_building = gravel_road
					has_building = paved_road
					has_building = imperial_road
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_has_roads
				OR = {
					has_building = gravel_road
					has_building = paved_road
					has_building = imperial_road
				}
				any_friendly_coast_border_province = {
					engineering_architecture_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				has_building = mathematician_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_math_academy
				is_capital = yes
				has_building = mathematician_academy
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				has_building = mathematician_academy
				is_capital = no
				province_trade_power = 30
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_math_academy
				is_capital = no
				province_trade_power = 30
				has_building = mathematician_academy
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 40
				owner = { engineer = 3 }
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_siege_advisor_employed
				development = 40
				owner = { engineer = 3 }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				development = 30
				owner = { architect = 3 }
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_architect_advisor_employed
				is_capital = yes
				development = 30
				owner = { architect = 3 }
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				development = 10
				owner = { full_idea_group = engineering_ideas }
			}
			
			custom_trigger_tooltip = {
				tooltip = tooltip_has_engineering_ideas
				is_capital = yes
				development = 10
				owner = { full_idea_group = engineering_ideas }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Military Tactics and Strategy
#######################################
tactics_strategy_institution = {

	bonus = {
		military_tactics = 0.1
	}

	trade_company_efficiency = 0.0

	historical_start_date = 700.1.1
	historical_start_province = 103 #Syracuse

	history = {
		OR = {
			AND = {
				is_year = 700
				OR = {
					superregion = italia_superregion
					superregion = macedonia_superregion
					superregion = asia_superregion
					superregion = armenia_superregion
					superregion = syria_superregion
					superregion = eastern_africa_superregion
					superregion = western_africa_superregion
					superregion = mesopotamia_superregion
					superregion = iran_superregion
					superregion = dakshinapatha_superregion
					superregion = uttarapatha_superregion
					superregion = china_superregion
					superregion = korea_superregion
					superregion = britannia_superregion
					superregion = celtica_superregion
					superregion = hispania_superregion
				}
				
			}
			AND = {
				is_year = 725
				OR = {
					superregion = sakastan_superregion
					superregion = parthia_superregion
					superregion = arabia_superregion
					superregion = haemusia_superregion
					superregion = scythia_superregion
				}
			}
		}
	}
	
	can_start = {
		is_year = 700
		is_state = yes
		OR = {
			culture_group = hellenic_group
			culture_group = italic_group
			culture_group = etruscan_culture_group
			culture_group = chinese_group
		}
		if = {
			limit = { owner = { ai = no } }
			owner = {
				army_tradition = 40
				neither_tribal_nor_native_trigger = yes
			}
			has_building = military_academy
		}
		else = {
			owner = {
				army_tradition = 30
				neither_tribal_nor_native_trigger = yes
			}
		}
	}
	
	start_chance = 5	#in 100 for when a province can_start
	
	
	on_start = iu_institution_events.12
	
	
	can_embrace = {
		always = yes
	}

	
	embracement_speed = {
	
		modifier = {
			factor = 1.0
			scale = yes
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					tactics_strategy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.25
			scale = yes
			potential = {
				NOT = {
					any_friendly_coast_border_province = {
						tactics_strategy_institution = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_border_province_has_embraced_this_institution
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					tactics_strategy_institution = 100
				}
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				owner = {
					OR = {
						has_leader_with = {
							general = yes
							shock = 5
						}
						has_leader_with = {
							general = yes
							fire = 5
						}
						has_leader_with = {
							general = yes
							manuever = 7
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_has_good_general
				is_capital = yes
				owner = {
					OR = {
						has_leader_with = {
							general = yes
							shock = 4
						}
						has_leader_with = {
							general = yes
							fire = 4
						}
						has_leader_with = {
							general = yes
							manuever = 6
						}
					}
				}
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				owner = { army_tradition = 80 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_50_army_tradition
				is_capital = yes
				owner = { army_tradition = 80 }
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			potential = {
				is_capital = yes
				owner = { army_professionalism = 0.9 }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_60_army_professionalism
				is_capital = yes
				owner = { army_professionalism = 0.9 }
			}
		}
		
		modifier = {
			factor = 0.1
			scale = yes
			potential = {
				is_capital = yes
				has_building = military_academy
				development = 20
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_owner_military_academy
				is_capital = yes
				has_building = military_academy
				development = 20
			}
		}

		modifier = {
			factor = 0.1
			scale = yes
			force_potential = yes
			potential = {
				is_capital = no
				province_trade_power = 30
				has_building = military_academy
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_province_military_academy
				is_capital = no
				province_trade_power = 30
				has_building = military_academy
			}
		}
		
		modifier = {
			factor = -0.05
			scale = yes
			force_potential = yes
			potential = {
				owner = { has_reform = levy_army_reform }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_levy_army_reform
				owner = { has_reform = levy_army_reform }
			}
		}
		
		modifier = {
			factor = 0.05
			scale = yes
			force_potential = yes
			potential = {
				is_capital = yes
				owner = { has_reform = standing_army_reform }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_standing_army_reform
				is_capital = yes
				owner = { has_reform = standing_army_reform }
			}
		}
		
		modifier = {
			factor = -0.1
			scale = yes
			potential = {
				owner = { tribal_or_native_trigger = yes }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_tribal_government
				owner = { tribal_or_native_trigger = yes }
			}
		}
	}
	
	ai_will_do = {
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.25
			is_at_war = yes
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.1
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.2
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.3
		}
		modifier = {
			factor = 2
			neighbors_tech_discount = 0.4
		}
	}
}

#######################################
# Elephant Domestication
#######################################

elephant_domestication = {
	bonus = {
		cavalry_power = 0.05
	}
	trade_company_efficiency = 0.0

	history = {
		OR = {
			superregion = uttarapatha_superregion
			superregion = dakshinapatha_superregion
			superregion = aethiopia_superregion
			superregion = mesopotamia_superregion
			superregion = iran_superregion
			superregion = syria_superregion
			superregion = eastern_africa_superregion
			superregion = western_africa_superregion
			region = baktria_region
			region = ariana_region
			region = parthia_region
		}
		OR = {
			culture_group = indian_group
			culture_group = dravidian_group
			culture_group = lanka_group
			culture_group = mleccha_group
			AND = {
				culture_group = tibetan_group
				OR = {
					superregion = uttarapatha_superregion
					superregion = dakshinapatha_superregion
					superregion = suvarnabhumi_superregion
				}
			}
			AND = {
				culture_group = viet_group
				superregion = suvarnabhumi_superregion
			}
			AND = {
				culture_group = malay_group
				superregion = suvarnabhumi_superregion
			}
			AND = {
				culture_group = eastern_iranian_group
				is_year = 245
			}
			AND = {
				culture_group = malay_group
				is_year = 265
			}
			AND = {
				culture_group = western_iranian
				is_year = 275
			}
			AND = {
				culture_group = akkadian_group
				is_year = 325
			}
			AND = {
				culture_group = semitic
				is_year = 350
			}
			AND = {
				culture_group = egyptian_group
				is_year = 350
			}
			AND = {
				culture_group = cushitic_group
				is_year = 400
			}
			AND = {
				OR = {
					culture = greco_semitic
					culture = seleucid
					culture = ptolemaic
					culture = greco_bactrian
					culture = greco_indian
					culture = greco_persian
				}
				is_year = 422
			}
		}	
	}
	
	# no need for events, as its there from the start.
	#can_start = {	is_year = 1000	}
	#start_chance = 100
	#on_start = iu_institution_events.1

	can_embrace = {
		always = yes
	}

	embracement_speed = {
		
		modifier = {
			scale = yes
			factor = 0.5
			potential = {
				OR = {
					elephant_region = yes
					owner = {
						OR = {
							any_owned_province = { elephant_domestication = 100 }
							has_institution = elephant_domestication
						}
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_friendly_coast_border_province_has_embraced_institution
				any_friendly_coast_border_province = {
					elephant_domestication = 100
				}
				elephant_region = yes
			}
		}
		modifier = {
			scale = yes
			factor = 0.25
			potential = {
				OR = {
					elephant_region = yes
					owner = {
						OR = {
							any_owned_province = { elephant_domestication = 100 }
							has_institution = elephant_domestication
						}
					}
				}
				NOT = {
					any_friendly_coast_border_province = {
						elephant_domestication = 100
					}
				}
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_any_coast_border_province_has_embraced_institution
				elephant_region = yes
				any_neighbor_province = {
					NOT = { owned_by = ROOT }
					elephant_domestication = 100
				}
			}
		}
		
		modifier = {
			factor = 0.15
			scale = yes
			potential = {
				owner = { has_institution = elephant_domestication }
			}
			custom_trigger_tooltip = {
				tooltip = tooltip_elephant_domestication_embraced
				owner = { has_institution = elephant_domestication }
			}
		}
	}
	
	ai_will_do = { #Cost of embracing institution must be lower than this factor * last month's regular income. (Or it has a more than long term goal...)
		factor = 24
		modifier = {
			factor = 0
			OR = {
				is_bankrupt = yes
				is_in_deficit = yes
				is_in_large_debt = yes
			}
		}
		modifier = {
			factor = 0.5
			is_at_war = yes
		}
	}
}
