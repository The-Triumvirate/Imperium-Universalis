# CLIMATE
AN_check_climate = {
	hidden_effect = {
		set_variable = { which = AN_prov_climate value = 0 }
		if = {
			limit = { has_global_flag = AN_global_climate_A }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_montane = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_polar = { set_variable = { which = AN_prov_pop_cap value = 6 } }
				#
				climate_outback = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_levante = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				#
				climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 16 } }
				climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_continental = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				#
				climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				#
				climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 10 } }
			}
		}
		else_if = {
			limit = { has_global_flag = AN_global_climate_0 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_montane = { set_variable = { which = AN_prov_pop_cap value = 6 } }
				climate_polar = { set_variable = { which = AN_prov_pop_cap value = 5 } }
				#
				climate_outback = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_levante = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				#
				climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_continental = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				#
				climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				#
				climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 9 } }
			}
		}
		else_if = {
			limit = { has_global_flag = AN_global_climate_1 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 6 } }
				climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_montane = { set_variable = { which = AN_prov_pop_cap value = 5 } }
				climate_polar = { set_variable = { which = AN_prov_pop_cap value = 4 } }
				#
				climate_outback = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_levante = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 6 } }
				#
				climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_continental = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				#
				climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				#
				climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 8 } }
			}
		}
		else_if = {
			limit = { has_global_flag = AN_global_climate_2 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_montane = { set_variable = { which = AN_prov_pop_cap value = 6 } }
				climate_polar = { set_variable = { which = AN_prov_pop_cap value = 5 } }
				#
				climate_outback = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_levante = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 7 } }
				#
				climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_continental = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				#
				climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				#
				climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 9 } }
			}
		}
		else_if = {
			limit = { has_global_flag = AN_global_climate_3 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_montane = { set_variable = { which = AN_prov_pop_cap value = 9 } }
				climate_polar = { set_variable = { which = AN_prov_pop_cap value = 8 } }
				#
				climate_outback = { set_variable = { which = AN_prov_pop_cap value = 12 } }
				climate_levante = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 11 } }
				climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 10 } }
				#
				climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 16 } }
				climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 18 } }
				climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 17 } }
				climate_continental = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				#
				climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 16 } }
				climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				#
				climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 14 } }
				climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 16 } }
				climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 15 } }
				climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 13 } }
				climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 12 } }
			}
		}
		else_if = {
			limit = { has_global_flag = AN_global_climate_4 }
			trigger_switch = {
				on_trigger = has_province_modifier
					climate_sicco = { set_variable = { which = AN_prov_pop_cap value = 12 } }
					climate_xeric = { set_variable = { which = AN_prov_pop_cap value = 13 } }
					climate_veldt = { set_variable = { which = AN_prov_pop_cap value = 14 } }
					climate_montane = { set_variable = { which = AN_prov_pop_cap value = 15 } }
					climate_polar = { set_variable = { which = AN_prov_pop_cap value = 13 } }
					#
					climate_outback = { set_variable = { which = AN_prov_pop_cap value = 15 } }
					climate_levante = { set_variable = { which = AN_prov_pop_cap value = 16 } }
					climate_chaco = { set_variable = { which = AN_prov_pop_cap value = 17 } }
					climate_pratumic = { set_variable = { which = AN_prov_pop_cap value = 18 } }
					climate_boreal = { set_variable = { which = AN_prov_pop_cap value = 16 } }
					#
					climate_chaparral = { set_variable = { which = AN_prov_pop_cap value = 18 } }
					climate_mediterranean = { set_variable = { which = AN_prov_pop_cap value = 21 } }
					climate_temperate = { set_variable = { which = AN_prov_pop_cap value = 20 } }
					climate_continental = { set_variable = { which = AN_prov_pop_cap value = 20 } }
					climate_hemiboreal = { set_variable = { which = AN_prov_pop_cap value = 19 } }
					#
					climate_cerradic = { set_variable = { which = AN_prov_pop_cap value = 19 } }
					climate_calidic = { set_variable = { which = AN_prov_pop_cap value = 20 } }
					climate_mesothermal = { set_variable = { which = AN_prov_pop_cap value = 21 } }
					climate_nemoral = { set_variable = { which = AN_prov_pop_cap value = 21 } }
					climate_oceanic = { set_variable = { which = AN_prov_pop_cap value = 20 } }
					#
					climate_tropical = { set_variable = { which = AN_prov_pop_cap value = 17 } }
					climate_pantanal = { set_variable = { which = AN_prov_pop_cap value = 18 } }
					climate_subtropical = { set_variable = { which = AN_prov_pop_cap value = 19 } }
					climate_cascadic = { set_variable = { which = AN_prov_pop_cap value = 20 } }
					climate_maritime = { set_variable = { which = AN_prov_pop_cap value = 18 } }
			}
		}
		#for dynamic localization purposes
		change_variable = {
			which = AN_prov_climate
			which = AN_prov_pop_cap
		}
	}
}

# DEVELOPMENT
AN_check_dev_variables = {
	hidden_effect = {
		set_variable = { which = AN_wealth_production value = 0 }
		set_variable = { which = AN_wealth_growth value = 1 }
		#set_variable = { which = AN_pop_production value = 0 }
		#set_variable = { which = AN_pop_growth value = 1 }

		set_variable = { which = AN_logistics value = 0 }
		set_variable = { which = AN_consumption value = 0 }
		set_variable = { which = AN_prov_pop value = 0 }
		set_variable = { which = AN_prov_infrastructure value = 0 }
		set_variable = { which = AN_prov_infrastructure_cap value = 0 }
		set_variable = { which = AN_prov_wealth value = 0 }
		set_variable = { which = AN_migration_factor value = 0 }
		set_variable = { which = AN_migration_growth value = 1 }
		set_variable = { which = AN_civ_stat value = 0 }
		set_variable = { which = dev_total value = 0 }
		set_variable = { which = AN_prov_pop_cap_mult value = 1 }


		#EXPORT DEV FOR CHECKS
		export_to_variable = {
			variable_name = AN_logistics
			value = modifier:local_development_cost
		}
		owner = {
			export_to_variable = {
				variable_name = AN_logistics
				value = modifier:development_cost
			}
			PREV = {
				change_variable = {
					which = AN_logistics
					which = PREV
				}
			}
		}

		if = { #-99.9% is the max negative consumption cost
			limit = {
				NOT = { check_variable = { which = AN_logistics value = 0.001 } }
			}
			set_variable = { which = AN_logistics value = 0.001 }
		}

		#export_to_variable = {
		#	variable_name = AN_autonomy
		#	value = trigger_value:local_autonomy
		#}
		#multiply_variable = { which = AN_autonomy value = -1 }
		#change_variable = { which = AN_autonomy value = 100 }
		#divide_variable = { which = AN_autonomy value = 100 }

		#export_to_variable = {
		#	variable_name = AN_conv_cost
		#	value = modifier:local_culture_conversion_cost
		#}
		#multiply_variable = { which = AN_conv_cost value = -1 }

		#
		export_to_variable = {
			variable_name = AN_prov_infrastructure
			value = trigger_value:base_production
		}
		export_to_variable = {
			variable_name = AN_prov_pop
			value = trigger_value:base_manpower
		}
		export_to_variable = {
			variable_name = AN_prov_wealth
			value = trigger_value:base_tax
		}
		###

		### CIV
		set_variable = { which = AN_civ_stat which = AN_prov_infrastructure }

		#if = {
		#	limit = { base_manpower = 5 }
		#	multiply_variable = { which = AN_civ_stat which = AN_prov_wealth }
		#	divide_variable = { which = AN_civ_stat which = AN_prov_pop }
		#}

		###
		AN_check_climate = yes
		###

		trigger_switch = {
			on_trigger = has_building
			wood_city_walls = { change_variable = { which = AN_civ_stat value = 1 } }
			stone_city_walls = { change_variable = { which = AN_civ_stat value = 2 } }
			turreted_city_walls = { change_variable = { which = AN_civ_stat value = 3 } }
			huge_city_walls = { change_variable = { which = AN_civ_stat value = 4 } }
		}

		trigger_switch = {
			on_trigger = has_building
			shrine = { change_variable = { which = AN_civ_stat value = 1 } }
			small_temple = { change_variable = { which = AN_civ_stat value = 2 } }
			great_temple = { change_variable = { which = AN_civ_stat value = 3 } }
			greater_temple = { change_variable = { which = AN_civ_stat value = 4 } }
		}

		trigger_switch = {
			on_trigger = has_building
			tiny_marketplace = { change_variable = { which = AN_civ_stat value = 1 } }
			marketplace = { change_variable = { which = AN_civ_stat value = 2 } }
			trade_depot = { change_variable = { which = AN_civ_stat value = 3 } }
			counting_house = { change_variable = { which = AN_civ_stat value = 4 } }
			bank = { change_variable = { which = AN_civ_stat value = 5 } }
		}

		trigger_switch = {
			on_trigger = has_building
			library = { change_variable = { which = AN_civ_stat value = 4 } }
			large_library = { change_variable = { which = AN_civ_stat value = 6 } }
			great_library = { change_variable = { which = AN_civ_stat value = 8 } }
		}

		trigger_switch = {
			on_trigger = has_building
			cottage = { change_variable = { which = AN_civ_stat value = 2 } }
			workshop = { change_variable = { which = AN_civ_stat value = 4 } }
			new_manufactory = { change_variable = { which = AN_civ_stat value = 6 } }
			factory = { change_variable = { which = AN_civ_stat value = 8 } }
		}

		trigger_switch = {
			on_trigger = has_building
			small_theater = { change_variable = { which = AN_civ_stat value = 2 } }
			big_theater = { change_variable = { which = AN_civ_stat value = 4 } }
			great_theater = { change_variable = { which = AN_civ_stat value = 6 } }
			huge_theater = { change_variable = { which = AN_civ_stat value = 8 } }
		}

		trigger_switch = {
			on_trigger = has_building
			small_harbor = { change_variable = { which = AN_civ_stat value = 1 } }
			big_harbor = { change_variable = { which = AN_civ_stat value = 2 } }
			harbor_district = { change_variable = { which = AN_civ_stat value = 3 } }
			massive_harbor = { change_variable = { which = AN_civ_stat value = 4 } }
		}

		trigger_switch = {
			on_trigger = has_building
			tribute_gathering = { change_variable = { which = AN_civ_stat value = 1 } }
			taxman = { change_variable = { which = AN_civ_stat value = 2 } }
			tax_collector = { change_variable = { which = AN_civ_stat value = 3 } }
		}

		trigger_switch = {
			on_trigger = has_building
			herbalist = { change_variable = { which = AN_civ_stat value = 6 }  change_variable = { which = AN_prov_pop_cap_mult value = 0.10 } }
			medicus = { change_variable = { which = AN_civ_stat value = 9 } change_variable = { which = AN_prov_pop_cap_mult value = 0.20 } }
			hospital = { change_variable = { which = AN_civ_stat value = 12 } change_variable = { which = AN_prov_pop_cap_mult value = 0.30 } }
		}

		trigger_switch = {
			on_trigger = has_building
			small_townhall = { change_variable = { which = AN_civ_stat value = 3 } }
			big_townhall = { change_variable = { which = AN_civ_stat value = 6 } }
			government_palace = { change_variable = { which = AN_civ_stat value = 9 } }
			government_district = { change_variable = { which = AN_civ_stat value = 12 } }
		}

		trigger_switch = {
			on_trigger = has_building
			embassy = { change_variable = { which = AN_civ_stat value = 4 } }
			diplomats_quarter = { change_variable = { which = AN_civ_stat value = 6 } }
		}

		trigger_switch = {
			on_trigger = has_building
			military_monument = { change_variable = { which = AN_civ_stat value = 8 } }
			naval_monument = { change_variable = { which = AN_civ_stat value = 8 } }
			imperial_palace = { change_variable = { which = AN_civ_stat value = 8 } }
			palace_garden = { change_variable = { which = AN_civ_stat value = 8 } }
		}

		if = { limit = { province_has_center_of_trade_of_level = 9 } change_variable = { which = AN_civ_stat value = 18 } change_variable = { which = AN_prov_pop_cap value = 120 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 8 } change_variable = { which = AN_civ_stat value = 16 } change_variable = { which = AN_prov_pop_cap value = 92 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 7 } change_variable = { which = AN_civ_stat value = 14 } change_variable = { which = AN_prov_pop_cap value = 68 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 6 } change_variable = { which = AN_civ_stat value = 12 } change_variable = { which = AN_prov_pop_cap value = 52 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 5 } change_variable = { which = AN_civ_stat value = 10 } change_variable = { which = AN_prov_pop_cap value = 38 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 4 } change_variable = { which = AN_civ_stat value = 8 } change_variable = { which = AN_prov_pop_cap value = 28 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 3 } change_variable = { which = AN_civ_stat value = 6 } change_variable = { which = AN_prov_pop_cap value = 20 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 2 } change_variable = { which = AN_civ_stat value = 4 } change_variable = { which = AN_prov_pop_cap value = 14 } }
		else_if = { limit = { province_has_center_of_trade_of_level = 1 } change_variable = { which = AN_civ_stat value = 2 } change_variable = { which = AN_prov_pop_cap value = 10 } }

		trigger_switch = {
			on_trigger = has_building
			farming_settlement = { change_variable = { which = AN_civ_stat value = 2 } change_variable = { which = AN_prov_pop_cap  value = 8 } }
			winery = { change_variable = { which = AN_civ_stat value = 3 } change_variable = { which = AN_prov_pop_cap  value = 6 } }
			shepherds = { change_variable = { which = AN_civ_stat value = 1 } change_variable = { which = AN_prov_pop_cap  value = 6 } }
			apiary = { change_variable = { which = AN_civ_stat value = 2 } change_variable = { which = AN_prov_pop_cap  value = 4 } }
			fishermen_huts = { change_variable = { which = AN_civ_stat value = 1 } change_variable = { which = AN_prov_pop_cap  value = 6 } }
			tannery = { change_variable = { which = AN_civ_stat value = 1 } change_variable = { which = AN_prov_pop_cap  value = 4 } }
			horsebreeder = { change_variable = { which = AN_civ_stat value = 3 } change_variable = { which = AN_prov_pop_cap  value = 2 } }
			lumberjack = { change_variable = { which = AN_civ_stat value = 3 } change_variable = { which = AN_prov_pop_cap  value = 2 } }
			salt_gatherers = { change_variable = { which = AN_civ_stat value = 2 } }
			weavers = { change_variable = { which = AN_civ_stat value = 4 } }
			miners_camp = { change_variable = { which = AN_civ_stat value = 3 } }
			pottery = { change_variable = { which = AN_civ_stat value = 5 } }
			glassmaker = { change_variable = { which = AN_civ_stat value = 5 } }
			tar_pit = { change_variable = { which = AN_civ_stat value = 3 } }
			blacksmith = { change_variable = { which = AN_civ_stat value = 5 } }
			goldsmith = { change_variable = { which = AN_civ_stat value = 5 } }
			dyer = { change_variable = { which = AN_civ_stat value = 5 } }
		}

		#Institutions
		if = {
			limit = { owner = { has_institution = writing_system } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.025 }
		}
		if = {
			limit = { owner = { has_institution = iron_age } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = coin_usage } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.025 }
		}
		if = {
			limit = { owner = { has_institution = siege_engineering_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = bureaucracy_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.05 }
		}
		if = {
			limit = { owner = { has_institution = cast_iron_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = classical_philosophy_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = civil_law_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.025 }
		}
		if = {
			limit = { owner = { has_institution = axiomatic_maths_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.025 }
		}
		if = {
			limit = { owner = { has_institution = blast_furnace_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = advanced_hydraulics_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.05 }
		}
		if = {
			limit = { owner = { has_institution = astronomy_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}
		if = {
			limit = { owner = { has_institution = engineering_architecture_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
			change_variable = { which = AN_prov_pop_cap_mult value = 0.025 }
		}
		if = {
			limit = { owner = { has_institution = tactics_strategy_institution } }
			change_variable = { which = AN_civ_stat value = 1 }
		}





		#change_variable = {
		#	which = AN_wealth_production
		#	which = AN_prov_infrastructure
		#}
		#multiply_variable = {
		#	which = AN_wealth_production
		#	value = 0.5
		#}

		#set_variable = {
		#	which = AN_wealth_production
		#	which = tempvar2
		#}

		#multiply_variable = {
		#	which = AN_wealth_production
		#	which = tempvar
		#}

		#change_variable = {
		#	which = AN_pop_production
		#	which = AN_prov_infrastructure
		#}
		#multiply_variable = {
		#	which = AN_pop_production
		#	value = 0.5
		#}

		#############
		# TRIGGER SWITCH FOR Terrain contribution to Carrying Capacity & Growth
		trigger_switch = {
			on_trigger = has_terrain
			grasslands = {
				change_variable = { which = AN_prov_pop_cap value = 6 }
				change_variable = { which = AN_prov_infrastructure_cap value = 10 }
			}
			woods = {
				change_variable = { which = AN_prov_pop_cap value = 6 }
				change_variable = { which = AN_prov_infrastructure_cap value = 9 }
			}
			hills = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			highlands = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 6 }
			}
			savannah = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 5 }
			}
			farmlands = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			forest = {
				change_variable = { which = AN_prov_pop_cap value = 2 }
				change_variable = { which = AN_prov_infrastructure_cap value = 4 }
			}
			jungle = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 6 }
			}
			mountain = {
				change_variable = { which = AN_prov_pop_cap value = 0 }
				change_variable = { which = AN_prov_infrastructure_cap value = 3 }
			}
			nile_plain = {
				change_variable = { which = AN_prov_pop_cap value = 12 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			mesopotamian_plain = {
				change_variable = { which = AN_prov_pop_cap value = 11 }
				change_variable = { which = AN_prov_infrastructure_cap value = 11 }
			}
			alluvial_plain = {
				change_variable = { which = AN_prov_pop_cap value = 10 }
				change_variable = { which = AN_prov_infrastructure_cap value = 10 }
			}
			floodplains = {
				change_variable = { which = AN_prov_pop_cap value = 9 }
				change_variable = { which = AN_prov_infrastructure_cap value = 9 }
			}
			drylands = {
				change_variable = { which = AN_prov_pop_cap value = 6 }
				change_variable = { which = AN_prov_infrastructure_cap value = 10 }
			}
			marsh = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			mangrove = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 3 }
			}
			wetlands = {
				change_variable = { which = AN_prov_pop_cap value = 6 }
				change_variable = { which = AN_prov_infrastructure_cap value = 5 }
			}
			oasis = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			coastline = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			steep_coast = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 3 }
			}
			fertile_highlands = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 6 }
			}
			steppe = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 5 }
			}
			highlands = {
				change_variable = { which = AN_prov_pop_cap value = 3 }
				change_variable = { which = AN_prov_infrastructure_cap value = 4 }
			}
			desert = {
				change_variable = { which = AN_prov_pop_cap value = 1 }
				change_variable = { which = AN_prov_infrastructure_cap value = 3 }
			}
			coastal_desert = {
				change_variable = { which = AN_prov_pop_cap value = 3 }
				change_variable = { which = AN_prov_infrastructure_cap value = 4 }
			}
			desert_river = {
				change_variable = { which = AN_prov_pop_cap value = 3 }
				change_variable = { which = AN_prov_infrastructure_cap value = 5 }
			}
			desert_mountain = {
				change_variable = { which = AN_prov_pop_cap value = -1 }
				change_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
			salt_desert = {
				change_variable = { which = AN_prov_pop_cap value = 0 }
				change_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}

			#UNIQUE TERRAIN

			memphis_t = {
				change_variable = { which = AN_prov_pop_cap value = 12 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			waset_t = {
				change_variable = { which = AN_prov_pop_cap value = 12 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			elephantine_t = {
				change_variable = { which = AN_prov_pop_cap value = 12 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			babil_t = {
				change_variable = { which = AN_prov_pop_cap value = 11 }
				change_variable = { which = AN_prov_infrastructure_cap value = 11 }
			}
			uruk_t = {
				change_variable = { which = AN_prov_pop_cap value = 11 }
				change_variable = { which = AN_prov_infrastructure_cap value = 11 }
			}
			rome_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			carthage_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			athen_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			neapel_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			byzantion_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			syracuse_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			milet_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			ephesus_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			corinth_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			sardis_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			susa_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			tyros_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			halicarnassus_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			argos_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			ninive_t = {
				change_variable = { which = AN_prov_pop_cap value = 8 }
				change_variable = { which = AN_prov_infrastructure_cap value = 12 }
			}
			jerusalem_t = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			siwa_t = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			naxos_t = {
				change_variable = { which = AN_prov_pop_cap value = 5 }
				change_variable = { which = AN_prov_infrastructure_cap value = 7 }
			}
			patara_t = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 3 }
			}
			parsa_t = {
				change_variable = { which = AN_prov_pop_cap value = 4 }
				change_variable = { which = AN_prov_infrastructure_cap value = 6 }
			}
			assur_t = {
				change_variable = { which = AN_prov_pop_cap value = 3 }
				change_variable = { which = AN_prov_infrastructure_cap value = 5 }
			}
		}

		## terrain features
		trigger_switch = { # non-stackable features
			on_trigger = has_province_modifier
			atoll = {
			#	change_variable = { which = AN_pop_production value = 2 }
				change_variable = { which = AN_prov_pop_cap value = 2 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 2 }
			}
			barrier_islands = {
				change_variable = { which = AN_prov_pop_cap value = 2 }
				change_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
			cliff = {
				subtract_variable = { which = AN_prov_pop_cap value = 1 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
			canyon = {
			#	change_variable = { which = AN_pop_production value = 1 }
				change_variable = { which = AN_prov_pop_cap value = 1 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 2 }
			}
			cove = {
				change_variable = { which = AN_prov_pop_cap value = 1 }
				change_variable = { which = AN_prov_infrastructure_cap value = 2 }
			}
			valley = {
			#	change_variable = { which = AN_pop_production value = 3 }
				change_variable = { which = AN_prov_pop_cap value = 1 }
				change_variable = { which = AN_prov_infrastructure_cap value = 2 }
			}
			fjord = {
			#	change_variable = { which = AN_pop_production value = 1 }
				change_variable = { which = AN_prov_pop_cap value = 2 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
			mesa = {
				change_variable = { which = AN_prov_pop_cap value = 1 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
			wadi = {
			#	change_variable = { which = AN_pop_production value = 1 }
				change_variable = { which = AN_prov_pop_cap value = 2 }
			}
			oasis = {
			#	change_variable = { which = AN_pop_production value = 2 }
				change_variable = { which = AN_prov_pop_cap value = 2 }
				change_variable = { which = AN_prov_infrastructure_cap value = 2 }
			}
			volcano = {
				change_variable = { which = AN_prov_pop_cap value = 3 }
				subtract_variable = { which = AN_prov_infrastructure_cap value = 1 }
			}
		}
		# stackable features
		if = {
			limit = { has_province_modifier = confluence }
		#	change_variable = { which = AN_pop_production value = 2 }
			change_variable = { which = AN_prov_pop_cap value = 2 }
			change_variable = { which = AN_prov_infrastructure_cap value = 1 }
		}
		if = {
			limit = { has_province_modifier = marsh_feature }
		#	subtract_variable = { which = AN_pop_production value = 2 }
			subtract_variable = { which = AN_prov_pop_cap value = 1 }
			subtract_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = swamp }
		#	subtract_variable = { which = AN_pop_production value = 2 }
			subtract_variable = { which = AN_prov_pop_cap value = 2 }
			subtract_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = bog }
		#	subtract_variable = { which = AN_pop_production value = 2 }
			subtract_variable = { which = AN_prov_pop_cap value = 1 }
			subtract_variable = { which = AN_prov_infrastructure_cap value = 3 }
		}
		if = {
			limit = { has_province_modifier = bayou }
			subtract_variable = { which = AN_prov_pop_cap value = 1 }
			change_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = floodplain }
		#	change_variable = { which = AN_pop_production value = 4 }
			change_variable = { which = AN_prov_pop_cap value = 2 }
			subtract_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = lakeshore }
		#	change_variable = { which = AN_pop_production value = 1 }
			change_variable = { which = AN_prov_pop_cap value = 1 }
			change_variable = { which = AN_prov_infrastructure_cap value = 1 }
		}


		## infr prj
		if = {
			limit = { has_province_modifier = irrigation }
		#	change_variable = { which = AN_pop_production value = 6 }
			change_variable = { which = AN_prov_pop_cap value = 2 }
			change_variable = { which = AN_prov_infrastructure_cap value = 1 }
		}
		if = {
			limit = { has_province_modifier = gardens }
		#	change_variable = { which = AN_pop_production value = 2 }
			change_variable = { which = AN_prov_pop_cap value = 3 }
			change_variable = { which = AN_prov_infrastructure_cap value = 1 }
		}
		if = {
			limit = { has_province_modifier = wells }
		#	change_variable = { which = AN_pop_production value = 4 }
			change_variable = { which = AN_prov_pop_cap value = 4 }
			change_variable = { which = AN_prov_infrastructure_cap value = 1 }
		}
		if = {
			limit = { has_province_modifier = terrace }
		#	change_variable = { which = AN_pop_production value = 3 }
			change_variable = { which = AN_prov_pop_cap value = 3 }
			change_variable = { which = AN_prov_infrastructure_cap value = 3 }
		}
		if = {
			limit = { has_province_modifier = dikes }
			change_variable = { which = AN_prov_pop_cap value = 5 }
			change_variable = { which = AN_prov_infrastructure_cap value = 5 }
		}
		if = {
			limit = { has_province_modifier = breakwaters }
			change_variable = { which = AN_prov_pop_cap value = 1 }
			change_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = lighthouse }
			change_variable = { which = AN_prov_infrastructure_cap value = 2 }
		}
		if = {
			limit = { has_province_modifier = dam }
		#	change_variable = { which = AN_pop_production value = 2 }
			change_variable = { which = AN_prov_pop_cap value = 4 }
			change_variable = { which = AN_prov_infrastructure_cap value = 4 }
		}

		# Migration
		trigger_switch = {
			on_trigger = has_building
			settlement = {
				change_variable = { which = AN_prov_infrastructure_cap  value = 2 }
				change_variable = { which = AN_prov_pop_cap  value = 6 }
			}
			village = {
				change_variable = { which = AN_prov_infrastructure_cap  value = 4 }
				change_variable = { which = AN_prov_pop_cap  value = 14 }
			}
			town = {
				change_variable = { which = AN_prov_infrastructure_cap  value = 8 }
				change_variable = { which = AN_prov_pop_cap  value = 26 }
			}
			city = {
				change_variable = { which = AN_prov_infrastructure_cap  value = 12 }
				change_variable = { which = AN_prov_pop_cap  value = 42 }
			}
			metropolis = {
				change_variable = { which = AN_prov_infrastructure_cap  value = 16 }
				change_variable = { which = AN_prov_pop_cap  value = 80 }
			}
		}

		if = {
			limit = { is_capital = yes }
			export_to_variable = { which = dev_total value = total_development who = OWNER }
			divide_variable = { which = dev_total value = 100 }
			if = { limit = { check_variable = { which = dev_total value = 100 } } change_variable = { which = AN_prov_pop_cap value = 100 } }
			else = { change_variable = { which = AN_prov_pop_cap which = dev_total } }
		}

		multiply_variable = { which = AN_prov_pop_cap which = AN_prov_pop_cap_mult }
		round_variable = { which = AN_prov_pop_cap value = 0 }
		set_variable = { which = AN_pop_production which = AN_prov_pop }
		multiply_variable = { which = AN_pop_production which = AN_prov_pop }
		divide_variable = { which = AN_pop_production which = AN_prov_pop_cap }
		set_variable = { which = AN_pop_growth which = AN_prov_pop }
		subtract_variable = { which = AN_pop_growth which = AN_pop_production }
		subtract_variable = { which = AN_pop_growth value = 1 }

		multiply_variable = {
			which = AN_prov_pop_cap
			value = 0.5
		}

		if = {
			limit = { NOT = { check_variable = { which = AN_pop_growth value = 1 } } check_variable = { which = AN_prov_pop_cap which = AN_prov_pop } }
			set_variable = { which = AN_pop_growth value = 1 }
		}

		multiply_variable = { which = AN_pop_growth value = 5 } #5 base growth - min/max 1 pop every 20 yrs


		multiply_variable = {
			which = AN_prov_pop_cap
			value = 2
		}
		change_variable = {
			which = AN_migration_factor
			which = AN_prov_pop_cap
		}
		subtract_variable = {
			which = AN_migration_factor
			which = AN_prov_pop
		}


		if = {
			limit = { NOT = { check_variable = { which = AN_migration_factor value = 0 } } }
			multiply_variable = {
				which = AN_migration_factor
				value = 2
			}
		}
		else_if = {
			limit = { check_variable = { which = AN_migration_factor value = 0 } }
			multiply_variable = {
				which = AN_migration_factor
				value = 0.5
			}
		}


		#Migration
		trigger_switch = {
			on_trigger = has_building
			settlement = {
				change_variable = { which = AN_migration_factor value = 4 }
			}
			village = {
				change_variable = { which = AN_migration_factor value = 8 }
			}
			town = {
				change_variable = { which = AN_migration_factor value = 12 }
			}
			city = {
				change_variable = { which = AN_migration_factor value = 20 }
			}
			metropolis = {
				change_variable = { which = AN_migration_factor value = 32 }
			}
		}
		if = {
			limit = { is_capital = yes }
			change_variable = { which = AN_migration_factor value = 3 }
		}
		if = {
			limit = { has_province_modifier = AN_migration_prio }
			change_variable = { which = AN_migration_factor value = 10 }
		}
		if = {
			limit = { has_province_modifier = AN_quarantine }
			subtract_variable = { which = AN_migration_factor value = 50 }
		}
		if = {
			limit = { is_looted = yes }
			subtract_variable = { which = AN_migration_factor value = 2 }
		}
		if = {
			limit = { is_prosperous = yes }
			change_variable = { which = AN_migration_factor value = 2 }
		}
		if = {
			limit = { has_siege = yes }
			subtract_variable = { which = AN_migration_factor value = 30 }
		}
		if = {
			limit = { NOT = { controlled_by = owner } }
			subtract_variable = { which = AN_migration_factor value = 10 }
		}

		#Trade Goods
#		trigger_switch = {
#			on_trigger = trade_goods
#			birds = { multiply_variable = { which = AN_wealth_growth value = 0.6  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			bison = { multiply_variable = { which = AN_wealth_growth value = 0.6  } multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			camels = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 0.9 } }
#			copper = { multiply_variable = { which = AN_wealth_growth value = 1.3  } }
#			crustaceans = { multiply_variable = { which = AN_wealth_growth value = 0.9  } multiply_variable = { which = AN_pop_growth value = 1.3 } }
#			dates = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			fish = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 1.2 } }
#			fruit = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			fur = { multiply_variable = { which = AN_wealth_growth value = 0.7  } multiply_variable = { which = AN_pop_growth value = 0.7 } }
#			gold = { multiply_variable = { which = AN_wealth_growth value = 1.5  } }
#			grain = { multiply_variable = { which = AN_pop_growth value = 1.5 } }
#			hardwood = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			herbs = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			horses = { multiply_variable = { which = AN_pop_growth value = 0.9 } }
#			incense = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.7 } }
#			ivory = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.5 } }
#			#jade = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 0.9 } }
#			livestock = { multiply_variable = { which = AN_pop_growth value = 1.4 } }
#			maize = { multiply_variable = { which = AN_wealth_growth value = 0.9  } multiply_variable = { which = AN_pop_growth value = 1.3 } }
#			millet = { multiply_variable = { which = AN_wealth_growth value = 0.8  } multiply_variable = { which = AN_pop_growth value = 1.3 } }
#			palm = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			pelagic_fish = { multiply_variable = { which = AN_wealth_growth value = 0.9  } multiply_variable = { which = AN_pop_growth value = 1.2 } }
#			potatoes = { multiply_variable = { which = AN_wealth_growth value = 0.8  } multiply_variable = { which = AN_pop_growth value = 1.4 } }
#			pottery = { multiply_variable = { which = AN_wealth_growth value = 1.1  } }
#			poultry = { multiply_variable = { which = AN_wealth_growth value = 0.9  } multiply_variable = { which = AN_pop_growth value = 1.4 } }
#			rice = { multiply_variable = { which = AN_pop_growth value = 1.4 } }
#			salt = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			shoal_fish = { multiply_variable = { which = AN_wealth_growth value = 0.9  } multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			silver = { multiply_variable = { which = AN_wealth_growth value = 1.5  } multiply_variable = { which = AN_pop_growth value = 0.9 } }
#			softwood = { multiply_variable = { which = AN_wealth_growth value = 1.1  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			stone = { multiply_variable = { which = AN_wealth_growth value = 0.8  } multiply_variable = { which = AN_pop_growth value = 0.8 } }
#			#tomatoes = { multiply_variable = { which = AN_pop_growth value = 1.1 } }
#			tin = { multiply_variable = { which = AN_wealth_growth value = 1.2  } multiply_variable = { which = AN_pop_growth value = 0.9 } }
#			tropical_wood = { multiply_variable = { which = AN_wealth_growth value = 1.3  } multiply_variable = { which = AN_pop_growth value = 0.7 } }
#			whales = { multiply_variable = { which = AN_wealth_growth value = 1.2  }  }
#			wool = { multiply_variable = { which = AN_wealth_growth value = 0.9  }  }
#		}

		#Census View
		if = {
			limit = {
				check_variable = {
					which = AN_prov_pop
					which = AN_prov_infrastructure
				}
			}
			multiply_variable = {
				which = AN_pop_growth
				which = AN_prov_infrastructure
			}
			divide_variable = {
				which = AN_pop_growth
				which = AN_prov_pop
			}
		}
		divide_variable = {
			which = AN_pop_growth
			which = AN_logistics
		}
		#multiply_variable = {
		#	which = AN_wealth_growth
		#	which = AN_wealth_production
		#}

		multiply_variable = {
			which = AN_civ_stat
			value = 0.01
		}
		change_variable = {
			which = AN_civ_stat
			value = 1
		}

		multiply_variable = {
			which = AN_wealth_growth
			which = AN_civ_stat
		}
		if = {
			limit = {
				check_variable = {
					which = AN_prov_pop
					which = AN_prov_wealth
				}
			}
			multiply_variable = {
				which = AN_prov_pop
				value = 4
			}
			multiply_variable = {
				which = AN_wealth_growth
				which = AN_prov_pop
			}
			divide_variable = {
				which = AN_wealth_growth
				which = AN_prov_infrastructure
			}
			multiply_variable = {
				which = AN_prov_pop
				value = 0.25
			}
		}
		divide_variable = {
			which = AN_wealth_growth
			which = AN_logistics
		}
		if = {
			limit = { check_variable = { which = AN_pop_growth value = 0 } }
			if = {
				limit = { check_variable = { which = AN_prov_wealth which = AN_prov_pop  } }
			}
			else = {
				set_variable = {
					which = AN_migration_growth
					which = AN_pop_growth
				}
				multiply_variable = {
					which = AN_migration_growth
					value = 0.5
				}
				subtract_variable = {
					which = AN_pop_growth
					which = AN_migration_growth
				}
			}
		}
		else = {
			set_variable = { which = AN_migration_growth value = -1 }
		}

		subtract_variable = { #RESET Civ
			which = AN_civ_stat
			value = 1
		}
		multiply_variable = {
			which = AN_civ_stat
			value = 100
		}
	}
}


AN_migration_calc = {
	hidden_effect = {
		AN_check_dev_variables = yes
		set_variable = { which = AN_sum_E which = AN_migration_growth }
		set_variable = { which = AN_sum_I which = AN_migration_factor }
		if = {
			limit = { check_variable = { which = AN_migration_growth value = 0 } }
			if = { limit = { owner = { technology_group = roman } } 270 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = greek } } 1008 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = punic } } 668 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = diadochi } } 2390 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = iranian } } 2756 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = balkan } } 1197 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = celtic } } 274 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = germanic } } 275 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = north_african } } 670 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = scythian_tech } } 7105 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = iberian } } 260 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = afro_arabian } } 903 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = indian } } 2925 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = far_eastern } } 4584 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = central_asian } } 2851 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = caucaso_anatolian } } 2088 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = south_east_asian } } 7685 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = britannic } } 8228 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = korean } } 8385 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = african } } 900 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = caucasian } } 2418 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = hispano_celtic } } 263 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = dongyi1 } } 4582 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = wuyue1 } } 8626 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = bashu1 } } 3411 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = nomad_group } } 3410 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = xinan1 } } 4587 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = weiguo } } 7692 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = qinguo } } 3207 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = qiguo } } 8280 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = jingchu } } 3223 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = hanguo } } 4607 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = yanguo } } 4586 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = zhaoguo } } 3415 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = tibetan_tech } } 4863 = { change_variable = { which = AN_sum_E which = PREV } } }
			else_if = { limit = { owner = { technology_group = austronesian_tech } } 7978 = { change_variable = { which = AN_sum_E which = PREV } } }
		}
		if = {
			limit = { check_variable = { which = AN_migration_factor value = 0 } }
			if = { limit = { owner = { technology_group = roman } } 270 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = greek } } 1008 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = punic } } 668 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = diadochi } } 2390 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = iranian } } 2756 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = balkan } } 1197 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = celtic } } 274 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = germanic } } 275 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = north_african } } 670 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = scythian_tech } } 7105 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = iberian } } 260 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = afro_arabian } } 903 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = indian } } 2925 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = far_eastern } } 4584 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = central_asian } } 2851 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = caucaso_anatolian } } 2088 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = south_east_asian } } 7685 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = britannic } } 8228 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = korean } } 8385 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = african } } 900 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = caucasian } } 2418 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = hispano_celtic } } 263 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = dongyi1 } } 4582 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = wuyue1 } } 8626 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = bashu1 } } 3411 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = nomad_group } } 3410 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = xinan1 } } 4587 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = weiguo } } 7692 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = qinguo } } 3207 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = qiguo } } 8280 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = jingchu } } 3223 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = hanguo } } 4607 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = yanguo } } 4586 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = zhaoguo } } 3415 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = tibetan_tech } } 4863 = { change_variable = { which = AN_sum_I which = PREV } } }
			else_if = { limit = { owner = { technology_group = austronesian_tech } } 7978 = { change_variable = { which = AN_sum_I which = PREV } } }
		}
	}
}


AN_dev_calc = {
	hidden_effect = {
		set_variable = { which = AN_migration_progress value = 0 }
		if = {
			limit = { check_variable = { which = AN_migration_factor value = 0 } }
			if = { limit = { owner = { technology_group = roman } } 270 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = greek } } 1008 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = punic } } 668 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = diadochi } } 2390 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = iranian } } 2756 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = balkan } } 1197 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = celtic } } 274 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = germanic } } 275 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = north_african } } 670 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = scythian_tech } } 7105 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = iberian } } 260 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = afro_arabian } } 903 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = indian } } 2925 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = far_eastern } } 4584 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = central_asian } } 2851 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = caucaso_anatolian } } 2088 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = south_east_asian } } 7685 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = britannic } } 8228 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = korean } } 8385 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = african } } 900 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = caucasian } } 2418 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = hispano_celtic } } 263 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = dongyi1 } } 4582 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = wuyue1 } } 8626 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = bashu1 } } 3411 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = nomad_group } } 3410 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = xinan1 } } 4587 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = weiguo } } 7692 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = qinguo } } 3207 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = qiguo } } 8280 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = jingchu } } 3223 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = hanguo } } 4607 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = yanguo } } 4586 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = zhaoguo } } 3415 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = tibetan_tech } } 4863 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }
			else_if = { limit = { owner = { technology_group = austronesian_tech } } 7978 = { PREV = { set_variable = { which = AN_sum_I which = PREV } set_variable = { which = AN_sum_E which = PREV } } } }

			set_variable = { which = AN_migration_progress which = AN_migration_factor }
			divide_variable = { which = AN_migration_progress which = AN_sum_I }
			multiply_variable = { which = AN_migration_progress which = AN_sum_E }

			change_variable = {
				which = AN_pop_progress
				which = AN_migration_progress
			}
		}
		change_variable = {
			which = AN_pop_progress
			which = AN_pop_growth
		}

		change_variable = {
			which = AN_wealth_progress
			which = AN_wealth_growth
		}

		#WEALTH CALC
		if = {
			limit = {
				check_variable = { which = AN_wealth_progress value = 100 }
			}
			add_base_tax = 1
			subtract_variable = {
				which = AN_wealth_progress
				value = 100
			}
			if = { limit = { check_variable = { which = AN_wealth_progress value = 100 } } add_base_tax = 1 subtract_variable = { which = AN_wealth_progress value = 100 } if = { limit = { check_variable = { which = AN_wealth_progress value = 100 } } add_base_tax = 1 subtract_variable = { which = AN_wealth_progress value = 100 } if = { limit = { check_variable = { which = AN_wealth_progress value = 100 } } add_base_tax = 1 subtract_variable = { which = AN_wealth_progress value = 100 } if = { limit = { check_variable = { which = AN_wealth_progress value = 100 } } add_base_tax = 1 subtract_variable = { which = AN_wealth_progress value = 100 } } } } }
			if = {
				limit = {
					owner = { ai = yes }
					NOT = {
						check_variable = {
							which = AN_prov_infrastructure
							which = AN_prov_infrastructure_cap
						}
						check_variable = {
							which = AN_prov_infrastructure
							which = AN_prov_wealth
						}
					}
				}
				add_base_tax = -2
				add_base_production = 1
			}
		}
		#POP CALC
		if = {
			limit = {
				check_variable = { which = AN_pop_progress value = 100 }
			}
			subtract_variable = {
				which = AN_pop_progress
				value = 100
			}
			add_base_manpower = 1
			if = { limit = { check_variable = { which = AN_pop_progress value = 100 } } subtract_variable = { which = AN_pop_progress value = 100 }	add_base_manpower = 1 if = { limit = { check_variable = { which = AN_pop_progress value = 100 } } subtract_variable = { which = AN_pop_progress value = 100 }	add_base_manpower = 1 if = { limit = { check_variable = { which = AN_pop_progress value = 100 } } subtract_variable = { which = AN_pop_progress value = 100 }	add_base_manpower = 1 if = { limit = { check_variable = { which = AN_pop_progress value = 100 } } subtract_variable = { which = AN_pop_progress value = 100 }	add_base_manpower = 1 } } } }
			if = {
				limit = {
					check_variable = { which = AN_minority_culture_size value = 1 }
				}
				random_list = {
					2 = { #Increase
						trigger = {
							NOT = {
								OR = {
									has_province_modifier = AN_primary_majority_culture_0
									has_province_modifier = AN_primary_majority_culture_1
									has_province_modifier = AN_unified_majority_culture_0
									has_province_modifier = AN_unified_majority_culture_1
									has_province_modifier = AN_expelled_majority_culture_0
									has_province_modifier = AN_expelled_majority_culture_1
									has_province_modifier = AN_expelled_majority_culture_2
									has_province_modifier = AN_expelled_majority_culture_3
								}
							}
							always = no #TEMP DISABLE
						}
						modifier = {
							factor = 3
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_primary_minority_culture_3
							}
							has_building = library
						}
						modifier = {
							factor = 3.5
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_primary_minority_culture_3
							}
							has_building = large_library
						}
						modifier = {
							factor = 4
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_primary_minority_culture_3
							}
							has_building = great_library
						}
						modifier = {
							factor = 1.5
							OR = {
								has_province_modifier = AN_unified_minority_culture_1
								has_province_modifier = AN_unified_minority_culture_2
								has_province_modifier = AN_unified_minority_culture_3
							}
							has_building = library
						}
						modifier = {
							factor = 1.75
							OR = {
								has_province_modifier = AN_unified_minority_culture_1
								has_province_modifier = AN_unified_minority_culture_2
								has_province_modifier = AN_unified_minority_culture_3
							}
							has_building = large_library
						}
						modifier = {
							factor = 2
							OR = {
								has_province_modifier = AN_unified_minority_culture_1
								has_province_modifier = AN_unified_minority_culture_2
								has_province_modifier = AN_unified_minority_culture_3
							}
							has_building = great_library
						}
						modifier = {
							factor = 0.5
							base_manpower = 14
						}
						modifier = {
							factor = 0.5
							base_manpower = 28
						}
						modifier = {
							factor = 0.5
							base_manpower = 42
						}
						modifier = {
							factor = 0.5
							base_manpower = 56
						}
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
								AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
								AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
								AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
							}
							add_province_modifier = {
								name = AN_grow_minority
								duration = 365
								#hidden = yes
							}
							AN_check_culture_minorities = yes
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
							add_province_modifier = {
								name = AN_grow_minority
								duration = 365
								#hidden = yes
							}
							AN_check_culture_minorities = yes
						}
						if = {
							limit = {
								check_variable = { which = AN_minority_religion_size value = 3 }
								AN_linked_culture_religion_min = yes
							}
							change_religion = variable:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
							AN_check_religion_minorities = yes
						}
						else_if = {
							limit = {
								check_variable = { which = AN_minority_religion_size value = 1 }
								AN_linked_culture_religion_min = yes
							}
							change_variable = { which = AN_minority_religion_size value = 1 }
							AN_check_religion_minorities = yes
						}
					}
					1 = { #Assimilate / Decrease
						trigger = {
							check_variable = { which = AN_minority_culture_size value = 1 }
							NOT = {
								OR = {
									has_province_modifier = AN_primary_minority_culture_1
									has_province_modifier = AN_primary_minority_culture_2
									has_province_modifier = AN_primary_minority_culture_3
									has_province_modifier = AN_unified_minority_culture_1
									has_province_modifier = AN_unified_minority_culture_2
									has_province_modifier = AN_unified_minority_culture_3
								}
							}
							always = no #TEMP DISABLE
						}
						modifier = {
							factor = 2
							OR = {
								has_province_modifier = AN_primary_majority_culture_0
								has_province_modifier = AN_primary_majority_culture_1
								has_province_modifier = AN_primary_majority_culture_2
								has_province_modifier = AN_primary_majority_culture_3
								has_province_modifier = AN_unified_majority_culture_0
								has_province_modifier = AN_unified_majority_culture_1
								has_province_modifier = AN_unified_majority_culture_2
								has_province_modifier = AN_unified_majority_culture_3
							}
						}
						subtract_variable = { which = AN_minority_culture_size value = 1 }
						AN_check_culture_minorities = yes
						add_province_modifier = {
							name = AN_shrink_minority
							duration = 365
							#hidden = yes
						}
						if = {
							limit = {
								check_variable = { which = AN_minority_religion_size value = 1 }
								AN_linked_culture_religion_min = yes
							}
							subtract_variable = { which = AN_minority_religion_size value = 1 }
							AN_check_religion_minorities = yes
						}
					}
					50 = { #Do Nothing

					}
				}
			}
		}
		else_if = { # lose pop
			limit = { NOT = { check_variable = { which = AN_pop_progress value = 0 } } }
			if = {
				limit = { base_manpower = 2 }
				add_base_manpower = -1
			}
			set_variable = {
				which = AN_pop_progress
				value = 10
			}
		}

		#CULTURE ASSIMILATION
		#AN_check_culture_process = yes
		AN_select_target_culture = yes
		if = {
			limit = { check_variable = { which = AN_target_culture value = 1 } NOT = { OR = { is_variable_equal = { which = AN_target_culture which = AN_province_culture } is_variable_equal = { which = AN_target_culture which = AN_minority_culture } } } }
			if = {
				limit = {
					OR = {
						AND = {
							OR = {
								has_province_modifier = AN_protected_minority_culture_1
								has_province_modifier = AN_accepted_minority_culture_1
								has_province_modifier = AN_non_accepted_minority_culture_1
								has_province_modifier = AN_enslaved_minority_culture_1
							}
							OR = {
								has_province_modifier = AN_primary_majority_culture_3
								has_province_modifier = AN_unified_majority_culture_3
								has_province_modifier = AN_coexisting_majority_culture_3
							}
						}
						AND = {
							OR = {
								has_province_modifier = AN_protected_majority_culture_3
								has_province_modifier = AN_accepted_majority_culture_3
								has_province_modifier = AN_non_accepted_majority_culture_3
								has_province_modifier = AN_enslaved_majority_culture_3
							}
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_unified_minority_culture_1
								has_province_modifier = AN_coexisting_minority_culture_1
							}
						}
					}
				}
				change_variable = { which = AN_culture_progress value = 1 }
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							OR = {
								has_province_modifier = AN_protected_minority_culture_2
								has_province_modifier = AN_accepted_minority_culture_2
								has_province_modifier = AN_non_accepted_minority_culture_2
								has_province_modifier = AN_enslaved_minority_culture_2
							}
							OR = {
								has_province_modifier = AN_primary_majority_culture_2
								has_province_modifier = AN_unified_majority_culture_2
								has_province_modifier = AN_coexisting_majority_culture_2
							}
						}
						AND = {
							OR = {
								has_province_modifier = AN_protected_majority_culture_2
								has_province_modifier = AN_accepted_majority_culture_2
								has_province_modifier = AN_non_accepted_majority_culture_2
								has_province_modifier = AN_enslaved_majority_culture_2
							}
							OR = {
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_unified_minority_culture_2
								has_province_modifier = AN_coexisting_minority_culture_2
							}
						}
					}
				}
				change_variable = { which = AN_culture_progress value = 1.5 }
			}
			else_if = {
				limit = {
					OR = {
						AND = {
							OR = {
								has_province_modifier = AN_protected_minority_culture_3
								has_province_modifier = AN_accepted_minority_culture_3
								has_province_modifier = AN_non_accepted_minority_culture_3
								has_province_modifier = AN_enslaved_minority_culture_3
							}
							OR = {
								has_province_modifier = AN_primary_majority_culture_1
								has_province_modifier = AN_unified_majority_culture_1
								has_province_modifier = AN_coexisting_majority_culture_1
							}
						}
						AND = {
							OR = {
								has_province_modifier = AN_protected_majority_culture_1
								has_province_modifier = AN_accepted_majority_culture_1
								has_province_modifier = AN_non_accepted_majority_culture_1
								has_province_modifier = AN_enslaved_majority_culture_1
							}
							OR = {
								has_province_modifier = AN_primary_minority_culture_3
								has_province_modifier = AN_unified_minority_culture_3
								has_province_modifier = AN_coexisting_minority_culture_3
							}
						}
					}
				}
				change_variable = { which = AN_culture_progress value = 2 }
			}
			else = {
				change_variable = { which = AN_culture_progress value = 0.5 }
			}
			if = {
				limit = { is_overseas = yes }
				change_variable = { which = AN_culture_progress value = 0.5 }
			}

			if = {
				limit = { check_variable = { which = AN_culture_progress value = 100 } }
				if = {
					limit = {
						OR = {
							has_province_modifier = AN_primary_majority_culture_0
							has_province_modifier = AN_primary_majority_culture_1
							has_province_modifier = AN_primary_majority_culture_2
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_unified_majority_culture_0
							has_province_modifier = AN_unified_majority_culture_1
							has_province_modifier = AN_unified_majority_culture_2
							has_province_modifier = AN_unified_majority_culture_3
							has_province_modifier = AN_coexisting_majority_culture_0
							has_province_modifier = AN_coexisting_majority_culture_1
							has_province_modifier = AN_coexisting_majority_culture_2
							has_province_modifier = AN_coexisting_majority_culture_3
						}
					}
					change_culture = variable:AN_target_culture
					set_variable = { which = AN_culture_progress value = 0 }

					if = {
						limit = {
							OR = {
								has_province_modifier = AN_primary_minority_culture
								has_province_modifier = AN_unified_minority_culture
								has_province_modifier = AN_coexisting_minority_culture
							}
						}

						set_variable = { which = AN_minority_culture which = AN_target_culture }
						set_variable = { which = AN_culture_progress value = 0 }

						if = {
							limit = {
								OR = {
									has_province_modifier = AN_primary_secondary_culture
									has_province_modifier = AN_unified_secondary_culture
									has_province_modifier = AN_coexisting_secondary_culture
								}
							}
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						else_if = {
							OR = {
								has_province_modifier = AN_protected_secondary_culture
								has_province_modifier = AN_accepted_secondary_culture
								has_province_modifier = AN_non_accepted_secondary_culture
								has_province_modifier = AN_enslaved_secondary_culture
							}
							set_variable = { which = AN_minority_culture which = AN_secondary_culture }
							set_variable = { which = AN_minority_culture_size value = 1 }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
					}
					if = {
						limit = {
							OR = {
								has_province_modifier = AN_primary_secondary_culture
								has_province_modifier = AN_unified_secondary_culture
								has_province_modifier = AN_coexisting_secondary_culture
							}
						}
						set_variable = { which = AN_secondary_culture which = AN_target_culture }
						set_variable = { which = AN_culture_progress value = 0 }
					}
				}
				else_if = {
					limit = {
						OR = {
							has_province_modifier = AN_primary_minority_culture_1
							has_province_modifier = AN_primary_minority_culture_2
							has_province_modifier = AN_primary_minority_culture_3
							has_province_modifier = AN_unified_minority_culture_1
							has_province_modifier = AN_unified_minority_culture_2
							has_province_modifier = AN_unified_minority_culture_3
							has_province_modifier = AN_coexisting_minority_culture_1
							has_province_modifier = AN_coexisting_minority_culture_2
							has_province_modifier = AN_coexisting_minority_culture_3
						}
					}
					set_variable = { which = AN_minority_culture which = AN_target_culture }
					set_variable = { which = AN_culture_progress value = 0 }
					if = {
						limit = {
							OR = {
								has_province_modifier = AN_primary_secondary_culture
								has_province_modifier = AN_unified_secondary_culture
								has_province_modifier = AN_coexisting_secondary_culture
							}
						}
						set_variable = { which = AN_secondary_culture value = 0 }
					}
					else_if = {
						OR = {
							has_province_modifier = AN_protected_secondary_culture
							has_province_modifier = AN_accepted_secondary_culture
							has_province_modifier = AN_non_accepted_secondary_culture
							has_province_modifier = AN_enslaved_secondary_culture
						}
						set_variable = { which = AN_minority_culture which = AN_secondary_culture }
						set_variable = { which = AN_minority_culture_size value = 1 }
						set_variable = { which = AN_secondary_culture value = 0 }
					}
				}
				else_if = {
					limit = {
						OR = {
							has_province_modifier = AN_primary_secondary_culture
							has_province_modifier = AN_unified_secondary_culture
							has_province_modifier = AN_coexisting_secondary_culture
						}
					}
					set_variable = { which = AN_secondary_culture which = AN_target_culture }
					set_variable = { which = AN_culture_progress value = 0 }
				}
			}
		}

		# CULTURE RESETTLEMENT
		if = {
			limit = {
				owner = { OR = { NOT = { government = native } can_migrate = no } }
				OR = {
					AND = {
						has_building = settlement
						base_manpower = 4
					}
					AND = {
						has_building = village
						base_manpower = 6
					}
					AND = {
						has_building = town
						base_manpower = 11
					}
					AND = {
						has_building = city
						base_manpower = 26
					}
					AND = {
						has_building = metropolis
						base_manpower = 51
					}
					AND = {
						NOT = { OR = { has_building = village has_building = town has_building = city has_building = metropolis } }
						base_tax = 2
						base_manpower = 2
					}
				}
				NOT = { OR = { has_province_modifier = AN_sent_migrants has_province_modifier = AN_received_migrants } }
				check_variable = { which = AN_prov_pop which = AN_prov_infrastructure }
			}

			if = { # HAS SECONDARY
				limit = {
					NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
				}
				#SELECT MAJ/MIN/SEC ORIGIN
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					random_list = {
						3 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_majority_culture_0
										has_province_modifier = AN_enslaved_majority_culture_0
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_majority_culture_0
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_majority_culture_0
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_majority_culture_0
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_0
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_0
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_0
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						3 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_3
										has_province_modifier = AN_enslaved_minority_culture_3
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_3
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_minority_culture_3
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_minority_culture_3
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_3
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_3
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_3
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
						1 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_secondary_culture_3
										has_province_modifier = AN_enslaved_secondary_culture_3
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_secondary_culture_3
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_secondary_culture_3
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_secondary_culture_3
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_secondary_culture_3
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_secondary_culture_3
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_secondary_culture_3
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_secondary_culture }
								set_variable = { which = AN_minority_culture which = AN_secondary_culture }
							}

							AN_religion_select_sec = yes
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					random_list = {
						4 = {
							trigger = {
								NOT = { has_province_modifier = AN_enslaved_majority_culture_1 }
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_primary_majority_culture_1
							}
							modifier = {
								factor = 1.75
								has_province_modifier = AN_unified_majority_culture_1
							}
							modifier = {
								factor = 1.5
								has_province_modifier = AN_accepted_majority_culture_1
							}
							modifier = {
								factor = 1.25
								has_province_modifier = AN_coexisting_majority_culture_1
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_1
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_1
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_1
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						2 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_enslaved_minority_culture_2
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_2
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_accepted_minority_culture_2
							}
							modifier = {
								factor = 1.25
								has_province_modifier = AN_coexisting_minority_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_2
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_2
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_2
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
						1 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_secondary_culture_2
										has_province_modifier = AN_enslaved_secondary_culture_2
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_secondary_culture_2
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_secondary_culture_2
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_secondary_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_secondary_culture_2
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_secondary_culture_2
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_secondary_culture_2
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_secondary_culture }
								set_variable = { which = AN_minority_culture which = AN_secondary_culture }
							}

							AN_religion_select_sec = yes
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					random_list = {
						5 = {
							trigger = {
								NOT = { has_province_modifier = AN_enslaved_majority_culture_2 }
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_primary_majority_culture_2
							}
							modifier = {
								factor = 2.5
								has_province_modifier = AN_unified_majority_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_accepted_majority_culture_2
							}
							modifier = {
								factor = 1.5
								has_province_modifier = AN_coexisting_majority_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_2
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_2
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_2
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						1 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_enslaved_minority_culture_1
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_1
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_minority_culture_1
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_minority_culture_1
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_1
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_1
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_1
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
						1 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_secondary_culture
										has_province_modifier = AN_enslaved_secondary_culture
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_secondary_culture
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_secondary_culture
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_secondary_culture
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_secondary_culture
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_secondary_culture
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_secondary_culture
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_secondary_culture }
								set_variable = { which = AN_minority_culture which = AN_secondary_culture }
							}

							AN_religion_select_sec = yes
						}
					}
				}
				else = {
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}
					AN_religion_select_maj = yes
				}
			}
			else = { #NO SECONDARY
				#SELECT MAJ/MIN ORIGIN
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					random_list = {
						4 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_majority_culture_1
										has_province_modifier = AN_enslaved_majority_culture_1
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_majority_culture_1
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_majority_culture_1
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_majority_culture_1
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_1
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_1
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_1
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						3 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_3
										has_province_modifier = AN_enslaved_minority_culture_3
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_3
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_minority_culture_3
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_minority_culture_3
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_3
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_3
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_3
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					random_list = {
						5 = {
							trigger = {
								NOT = { has_province_modifier = AN_enslaved_majority_culture_2 }
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_primary_majority_culture_2
							}
							modifier = {
								factor = 1.75
								has_province_modifier = AN_unified_majority_culture_2
							}
							modifier = {
								factor = 1.5
								has_province_modifier = AN_accepted_majority_culture_2
							}
							modifier = {
								factor = 1.25
								has_province_modifier = AN_coexisting_majority_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_2
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_2
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_2
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						2 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_enslaved_minority_culture_2
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_2
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_accepted_minority_culture_2
							}
							modifier = {
								factor = 1.25
								has_province_modifier = AN_coexisting_minority_culture_2
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_2
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_2
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_2
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
					random_list = {
						6 = {
							trigger = {
								NOT = { has_province_modifier = AN_enslaved_majority_culture_3 }
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_primary_majority_culture_3
							}
							modifier = {
								factor = 2.5
								has_province_modifier = AN_unified_majority_culture_3
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_accepted_majority_culture_3
							}
							modifier = {
								factor = 1.5
								has_province_modifier = AN_coexisting_majority_culture_3
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_majority_culture_3
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_majority_culture_3
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_majority_culture_3
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_culture which = PREV }
								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_secondary_culture which = AN_province_culture }
							}

							AN_religion_select_maj = yes
						}
						1 = {
							trigger = {
								NOT = {
									OR = {
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_enslaved_minority_culture_1
									}
								}
							}
							modifier = {
								factor = 0.1
								has_province_modifier = AN_unified_minority_culture_1
							}
							modifier = {
								factor = 0.5
								has_province_modifier = AN_accepted_minority_culture_1
							}
							modifier = {
								factor = 0.75
								has_province_modifier = AN_coexisting_minority_culture_1
							}
							modifier = {
								factor = 2
								has_province_modifier = AN_protected_minority_culture_1
							}
							modifier = {
								factor = 3
								has_province_modifier = AN_non_accepted_minority_culture_1
							}
							modifier = {
								factor = 10
								has_province_modifier = AN_expelled_minority_culture_1
							}
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_culture which = PREV }
								set_variable = { which = AN_province_culture which = AN_minority_culture }
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							}

							AN_religion_select_min = yes
						}
					}
				}
				else = {
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}
					AN_religion_select_maj = yes
				}
			}

			save_global_event_target_as = AN_resettle_origin

			random_list = {  #
				5 = { 	#Neighbor
					trigger = {
						NOT = { has_province_modifier = AN_sent_migrants }
						any_neighbor_province = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
							OR = {
								AND = { #origin = maj #prio 5
									is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
									check_variable = { which = AN_minority_culture_size value = 1 }
									NOT = {
										OR = {
											has_province_flag = AN_expel_maj
											has_province_modifier = AN_primary_secondary_culture
											has_province_modifier = AN_primary_minority_culture_1
											has_province_modifier = AN_primary_minority_culture_2
											has_province_modifier = AN_primary_minority_culture_3
										}
									}
								}
								AND = { #origin = min #prio 5
									is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
									event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
									NOT = {
										OR = {
											has_province_flag = AN_expel_min
											has_province_modifier = AN_primary_majority_culture_0
											has_province_modifier = AN_primary_majority_culture_1
											has_province_modifier = AN_unified_majority_culture_0
											has_province_modifier = AN_unified_majority_culture_1
										}
									}
								}
								AND = { #origin = sec #prio 4
									is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
									NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
									NOT = {
										OR = {
											has_province_flag = AN_expel_sec
											has_province_modifier = AN_primary_minority_culture_1
											has_province_modifier = AN_primary_minority_culture_2
											has_province_modifier = AN_primary_minority_culture_3
										}
									}
								}
								NOT = { #No Minority, origin =/= maj #prio 1
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
									}
								}
								AND = { #Minority, origin =/= maj/min/sec #prio 2
									check_variable = { which = AN_minority_culture_size value = 1 }
									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
											is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
										}
									}
								}
							}
						}
					}
					modifier = {
						factor = 0.5
						check_variable = { which = AN_prov_pop which = AN_prov_pop_cap }
						NOT = {
							OR = {
								has_building = settlement
								has_building = village
								has_building = town
								has_building = city
								has_building = metropolis
							}
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_primary_majority_culture_4
						}
					}
					modifier = {
						factor = 4
						OR = {
							has_province_modifier = AN_non_accepted_majority_culture_3
							has_province_modifier = AN_non_accepted_majority_culture_4
						}
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 3 }
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 6 }
					}
					modifier = {
						factor = 0.90
						has_building = settlement
					}
					modifier = {
						factor = 0.75
						has_building = village
					}
					modifier = {
						factor = 0.5
						has_building = town
					}
					modifier = {
						factor = 0.25
						has_building = city
					}
					modifier = {
						factor = 0.1
						has_building = metropolis
					}
					modifier = {
						factor = 2
						devastation = 25
					}
					modifier = {
						factor = 2
						devastation = 50
					}
					modifier = {
						factor = 2
						devastation = 75
					}



					random_neighbor_province = {
						limit = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

							is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
							check_variable = { which = AN_minority_culture_size value = 1 }
							NOT = {
								OR = {
									has_province_flag = AN_expel_maj
									has_province_modifier = AN_primary_secondary_culture
									has_province_modifier = AN_primary_minority_culture_1
									has_province_modifier = AN_primary_minority_culture_2
									has_province_modifier = AN_primary_minority_culture_3
								}
							}
						}
						save_global_event_target_as = AN_resettle_target
					}

					random_neighbor_province = {
						limit = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

							is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
							event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
							NOT = {
								OR = {
									has_province_flag = AN_expel_min
									has_province_modifier = AN_primary_majority_culture_0
									has_province_modifier = AN_primary_majority_culture_1
									has_province_modifier = AN_unified_majority_culture_0
									has_province_modifier = AN_unified_majority_culture_1
								}
							}
						}
						save_global_event_target_as = AN_resettle_target
					}

					random_neighbor_province = {
						limit = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

							is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
							NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
							NOT = {
								OR = {
									has_province_flag = AN_expel_sec
									has_province_modifier = AN_primary_minority_culture_1
									has_province_modifier = AN_primary_minority_culture_2
									has_province_modifier = AN_primary_minority_culture_3
								}
							}
						}
						save_global_event_target_as = AN_resettle_target
					}

					random_neighbor_province = {
						limit = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

							check_variable = { which = AN_minority_culture_size value = 1 }
							NOT = {
								OR = {
									is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
									is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
									is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
								}
							}
						}
						save_global_event_target_as = AN_resettle_target
					}

					random_neighbor_province = {
						limit = {
							check_variable = { which = AN_migration_factor value = 0 }
							NOT = { has_province_modifier = AN_received_migrants }
							check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

							NOT = {
								OR = {
									is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
									check_variable = { which = AN_minority_culture_size value = 1 }
								}
							}
						}
						save_global_event_target_as = AN_resettle_target
					}


					set_province_flag = AN_migration
				}
				4 = { 	#Owned Coastal Prov
					trigger = {
						NOT = { has_province_modifier = AN_sent_migrants }
						#OR = {
							has_port = yes
						#	province_has_center_of_trade_of_level = 1
						#}
						owner = {
							any_owned_province = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									AND = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												has_province_flag = AN_expel_maj
												has_province_modifier = AN_primary_secondary_culture
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_min
												has_province_modifier = AN_primary_majority_culture_0
												has_province_modifier = AN_primary_majority_culture_1
												has_province_modifier = AN_unified_majority_culture_0
												has_province_modifier = AN_unified_majority_culture_1
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
										NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_sec
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
										}
									}
									AND = {
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
											}
										}
									}
								}
							}
						}
					}
					modifier = {
						factor = 2
						check_variable = { which = AN_prov_pop which = AN_prov_pop_cap }
						OR = {
							has_building = small_harbor
							has_building = big_harbor
							has_building = harbor_district
							has_building = massive_harbor
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_primary_majority_culture_4
						}
					}
					modifier = {
						factor = 4
						OR = {
							has_province_modifier = AN_non_accepted_majority_culture_3
							has_province_modifier = AN_non_accepted_majority_culture_4
						}
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 3 }
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 6 }
					}
					modifier = {
						factor = 0.90
						has_building = settlement
					}
					modifier = {
						factor = 0.75
						has_building = village
					}
					modifier = {
						factor = 0.5
						has_building = town
					}
					modifier = {
						factor = 0.25
						has_building = city
					}
					modifier = {
						factor = 0.1
						has_building = metropolis
					}
					modifier = {
						factor = 2
						devastation = 25
					}
					modifier = {
						factor = 2
						devastation = 50
					}
					modifier = {
						factor = 2
						devastation = 75
					}



					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}

					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }


								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}

					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										has_province_flag = AN_expel_maj
										has_province_modifier = AN_primary_secondary_culture
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}

					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
								event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_min
										has_province_modifier = AN_primary_majority_culture_0
										has_province_modifier = AN_primary_majority_culture_1
										has_province_modifier = AN_unified_majority_culture_0
										has_province_modifier = AN_unified_majority_culture_1
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}

					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								#OR = {
									has_port = yes
								#	province_has_center_of_trade_of_level = 1
								#}
								is_city = yes
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }


								is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
								NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_sec
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}

					set_province_flag = AN_migration
				}
				3 = { 	#Owned Urban Primary/Unified
					trigger = {
						NOT = { has_province_modifier = AN_sent_migrants }
						OR = {
							has_building = settlement
							has_building = village
							has_building = town
							has_building = city
							has_building = metropolis
						}
						OR = {
							OR = {
								has_province_modifier = AN_primary_majority_culture_2
								has_province_modifier = AN_primary_majority_culture_3
								has_province_modifier = AN_primary_majority_culture_4
							}
							OR = {
								has_province_modifier = AN_unified_majority_culture_2
								has_province_modifier = AN_unified_majority_culture_3
								has_province_modifier = AN_unified_majority_culture_4
							}
						}
						owner = {
							any_owned_province = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}
								OR = {
									AND = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												has_province_flag = AN_expel_maj
												has_province_modifier = AN_primary_secondary_culture
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_min
												has_province_modifier = AN_primary_majority_culture_0
												has_province_modifier = AN_primary_majority_culture_1
												has_province_modifier = AN_unified_majority_culture_0
												has_province_modifier = AN_unified_majority_culture_1
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
										NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_sec
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
										}
									}
									AND = {
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
											}
										}
									}
								}
							}
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_primary_majority_culture_4
						}
					}
					modifier = {
						factor = 4
						OR = {
							has_province_modifier = AN_non_accepted_majority_culture_3
							has_province_modifier = AN_non_accepted_majority_culture_4
						}
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 3 }
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 6 }
					}
					modifier = {
						factor = 0.75
						has_building = village
					}
					modifier = {
						factor = 0.5
						has_building = town
					}
					modifier = {
						factor = 0.25
						has_building = city
					}
					modifier = {
						factor = 0.1
						has_building = metropolis
					}
					modifier = {
						factor = 2
						devastation = 25
					}
					modifier = {
						factor = 2
						devastation = 50
					}
					modifier = {
						factor = 2
						devastation = 75
					}



					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}

								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}

								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}

								is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										has_province_flag = AN_expel_maj
										has_province_modifier = AN_primary_secondary_culture
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}

								is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
								event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_min
										has_province_modifier = AN_primary_majority_culture_0
										has_province_modifier = AN_primary_majority_culture_1
										has_province_modifier = AN_unified_majority_culture_0
										has_province_modifier = AN_unified_majority_culture_1
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									has_building = settlement
									has_building = village
									has_building = town
									has_building = city
									has_building = metropolis
								}


								is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
								NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_sec
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}
					set_province_flag = AN_migration
				}
				2 = { 	#Colonial
					trigger = {
						NOT = { has_province_modifier = AN_sent_migrants }
						is_state = yes
						is_overseas = no
						owner = {
							NOT = { capital_scope = { OR = { continent = north_america continent = south_america } } }
							any_owned_province = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = { is_state = no is_overseas = yes }
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
								OR = {
									AND = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												has_province_flag = AN_expel_maj
												has_province_modifier = AN_primary_secondary_culture
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_min
												has_province_modifier = AN_primary_majority_culture_0
												has_province_modifier = AN_primary_majority_culture_1
												has_province_modifier = AN_unified_majority_culture_0
												has_province_modifier = AN_unified_majority_culture_1
											}
										}
									}
									AND = {
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
										NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
										NOT = {
											OR = {
												has_province_flag = AN_expel_sec
												has_province_modifier = AN_primary_minority_culture_1
												has_province_modifier = AN_primary_minority_culture_2
												has_province_modifier = AN_primary_minority_culture_3
											}
										}
									}
									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
										}
									}
									AND = {
										check_variable = { which = AN_minority_culture_size value = 1 }
										NOT = {
											OR = {
												is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
												is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
											}
										}
									}
								}
							}
						}
					}
					modifier = {
						factor = 2
						check_variable = { which = AN_prov_pop which = AN_prov_pop_cap }
						NOT = {
							OR = {
								has_building = village
								has_building = town
								has_building = city
								has_building = metropolis
							}
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_primary_majority_culture_4
						}
					}
					modifier = {
						factor = 4
						OR = {
							has_province_modifier = AN_non_accepted_majority_culture_3
							has_province_modifier = AN_non_accepted_majority_culture_4
						}
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 3 }
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 6 }
					}
					modifier = {
						factor = 0.90
						has_building = settlement
					}
					modifier = {
						factor = 0.75
						has_building = village
					}
					modifier = {
						factor = 0.5
						has_building = town
					}
					modifier = {
						factor = 0.25
						has_building = city
					}
					modifier = {
						factor = 0.1
						has_building = metropolis
					}
					modifier = {
						factor = 2
						devastation = 25
					}
					modifier = {
						factor = 2
						devastation = 50
					}
					modifier = {
						factor = 2
						devastation = 75
					}



					owner = {
						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = {
									is_state = no
									is_overseas = yes
								}
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										check_variable = { which = AN_minority_culture_size value = 1 }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = {
									is_state = no
									is_overseas = yes
								}
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
										is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = {
									is_state = no
									is_overseas = yes
								}
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
								check_variable = { which = AN_minority_culture_size value = 1 }
								NOT = {
									OR = {
										has_province_flag = AN_expel_maj
										has_province_modifier = AN_primary_secondary_culture
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = {
									is_state = no
									is_overseas = yes
								}
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
								event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_min
										has_province_modifier = AN_primary_majority_culture_0
										has_province_modifier = AN_primary_majority_culture_1
										has_province_modifier = AN_unified_majority_culture_0
										has_province_modifier = AN_unified_majority_culture_1
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}

						random_owned_province = {
							limit = {
								check_variable = { which = AN_migration_factor value = 0 }
								NOT = { has_province_modifier = AN_received_migrants }
								OR = {
									is_state = no
									is_overseas = yes
								}
								check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

								is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
								NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
								NOT = {
									OR = {
										has_province_flag = AN_expel_sec
										has_province_modifier = AN_primary_minority_culture_1
										has_province_modifier = AN_primary_minority_culture_2
										has_province_modifier = AN_primary_minority_culture_3
									}
								}
							}
							save_global_event_target_as = AN_resettle_target
						}
					}
					set_province_flag = AN_migration
				}
				2 = { 	#Colonial Subject
					trigger = {
						NOT = { has_province_modifier = AN_sent_migrants }
						OR = {
							has_port = yes
							has_building = settlement
							has_building = village
							has_building = town
							has_building = city
							has_building = metropolis
						}
						owner = {
							any_subject_country = {
								OR = {
									is_subject_of_type = colony
									is_subject_of_type = crown_colony
									is_subject_of_type = private_enterprise
									is_subject_of_type = self_governing_colony
								}
								any_owned_province = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
									OR = {
										AND = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
											NOT = {
												OR = {
													has_province_flag = AN_expel_maj
													has_province_modifier = AN_primary_secondary_culture
													has_province_modifier = AN_primary_minority_culture_1
													has_province_modifier = AN_primary_minority_culture_2
													has_province_modifier = AN_primary_minority_culture_3
												}
											}
										}
										AND = {
											is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
											event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
											NOT = {
												OR = {
													has_province_flag = AN_expel_min
													has_province_modifier = AN_primary_majority_culture_0
													has_province_modifier = AN_primary_majority_culture_1
													has_province_modifier = AN_unified_majority_culture_0
													has_province_modifier = AN_unified_majority_culture_1
												}
											}
										}
										AND = {
											is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
											NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
											NOT = {
												OR = {
													has_province_flag = AN_expel_sec
													has_province_modifier = AN_primary_minority_culture_1
													has_province_modifier = AN_primary_minority_culture_2
													has_province_modifier = AN_primary_minority_culture_3
												}
											}
										}
										NOT = {
											OR = {
												is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
												check_variable = { which = AN_minority_culture_size value = 1 }
											}
										}
										AND = {
											check_variable = { which = AN_minority_culture_size value = 1 }
											NOT = {
												OR = {
													is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
													is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
													is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
												}
											}
										}
									}
								}
							}
						}
					}
					modifier = {
						factor = 2
						check_variable = { which = AN_prov_pop which = AN_prov_pop_cap }
						NOT = {
							OR = {
								has_building = settlement
								has_building = village
								has_building = town
								has_building = city
								has_building = metropolis
							}
						}
					}
					modifier = {
						factor = 2
						OR = {
							has_province_modifier = AN_primary_majority_culture_3
							has_province_modifier = AN_primary_majority_culture_4
						}
					}
					modifier = {
						factor = 4
						OR = {
							has_province_modifier = AN_non_accepted_majority_culture_3
							has_province_modifier = AN_non_accepted_majority_culture_4
						}
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 3 }
					}
					modifier = {
						factor = 0.5
						NOT = { base_manpower = 6 }
					}
					modifier = {
						factor = 0.90
						has_building = settlement
					}
					modifier = {
						factor = 0.75
						has_building = village
					}
					modifier = {
						factor = 0.5
						has_building = town
					}
					modifier = {
						factor = 0.25
						has_building = city
					}
					modifier = {
						factor = 0.1
						has_building = metropolis
					}
					modifier = {
						factor = 2
						devastation = 25
					}
					modifier = {
						factor = 2
						devastation = 50
					}
					modifier = {
						factor = 2
						devastation = 75
					}



					owner = {
						random_subject_country = {
							limit = {
								has_port = yes
								OR = {
									is_subject_of_type = colony
									is_subject_of_type = crown_colony
									is_subject_of_type = private_enterprise
									is_subject_of_type = self_governing_colony
								}
								any_owned_province = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }
									OR = {
										AND = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
											NOT = {
												OR = {
													has_province_flag = AN_expel_maj
													has_province_modifier = AN_primary_secondary_culture
													has_province_modifier = AN_primary_minority_culture_1
													has_province_modifier = AN_primary_minority_culture_2
													has_province_modifier = AN_primary_minority_culture_3
												}
											}
										}
										AND = {
											is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
											event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
											NOT = {
												OR = {
													has_province_flag = AN_expel_min
													has_province_modifier = AN_primary_majority_culture_0
													has_province_modifier = AN_primary_majority_culture_1
													has_province_modifier = AN_unified_majority_culture_0
													has_province_modifier = AN_unified_majority_culture_1
												}
											}
										}
										AND = {
											is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
											NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
											NOT = {
												OR = {
													has_province_flag = AN_expel_sec
													has_province_modifier = AN_primary_minority_culture_1
													has_province_modifier = AN_primary_minority_culture_2
													has_province_modifier = AN_primary_minority_culture_3
												}
											}
										}
										NOT = {
											OR = {
												is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
												check_variable = { which = AN_minority_culture_size value = 1 }
											}
										}
										AND = {
											check_variable = { which = AN_minority_culture_size value = 1 }
											NOT = {
												OR = {
													is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
													is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
													is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
												}
											}
										}
									}
								}
							}
							random_owned_province = {
								limit = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											check_variable = { which = AN_minority_culture_size value = 1 }
										}
									}
								}
								save_global_event_target_as = AN_resettle_target
							}

							random_owned_province = {
								limit = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

									check_variable = { which = AN_minority_culture_size value = 1 }
									NOT = {
										OR = {
											is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
											is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
											is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
										}
									}
								}
								save_global_event_target_as = AN_resettle_target
							}

							random_owned_province = {
								limit = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

									is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
									check_variable = { which = AN_minority_culture_size value = 1 }
									NOT = {
										OR = {
											has_province_flag = AN_expel_maj
											has_province_modifier = AN_primary_secondary_culture
											has_province_modifier = AN_primary_minority_culture_1
											has_province_modifier = AN_primary_minority_culture_2
											has_province_modifier = AN_primary_minority_culture_3
										}
									}
								}
								save_global_event_target_as = AN_resettle_target
							}

							random_owned_province = {
								limit = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

									is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
									event_target:AN_DUMMY_PROV = { check_variable = { which = AN_minority_culture value = 1 } }
									NOT = {
										OR = {
											has_province_flag = AN_expel_min
											has_province_modifier = AN_primary_majority_culture_0
											has_province_modifier = AN_primary_majority_culture_1
											has_province_modifier = AN_unified_majority_culture_0
											has_province_modifier = AN_unified_majority_culture_1
										}
									}
								}
								save_global_event_target_as = AN_resettle_target
							}

							random_owned_province = {
								limit = {
									check_variable = { which = AN_migration_factor value = 0 }
									NOT = { has_province_modifier = AN_received_migrants }
									OR = {
										has_port = yes
										has_building = settlement
										has_building = village
										has_building = town
										has_building = city
										has_building = metropolis
									}
									check_variable = { which = AN_prov_pop_cap which = AN_prov_pop }

									is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
									NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
									NOT = {
										OR = {
											has_province_flag = AN_expel_sec
											has_province_modifier = AN_primary_minority_culture_1
											has_province_modifier = AN_primary_minority_culture_2
											has_province_modifier = AN_primary_minority_culture_3
										}
									}
								}
								save_global_event_target_as = AN_resettle_target
							}
						}
					}
					set_province_flag = AN_migration
				}
				500 = { #Do Nothing
					trigger = {
						NOT = {
							OR = {
								has_province_flag = AN_expel_maj
								has_province_flag = AN_expel_min
								has_province_flag = AN_expel_sec
							}
						}
					}
					modifier = {
						factor = 3
						base_manpower = 3
						NOT = { base_manpower = 4 }
					}
					modifier = {
						factor = 1.5
						base_manpower = 4
						NOT = { base_manpower = 5 }
					}
				}
			}

			if = {
				limit = { has_province_flag = AN_migration }
				if = {
					limit = { base_manpower = 11  }
					random_list = {
						1 = {
							AN_mig_sub = yes
						}
						1 = {
							modifier = {
								factor = 2
								base_manpower = 11
								NOT = { base_manpower = 21 }
							}
							modifier = {
								factor = 3
								base_manpower = 21
								NOT = { base_manpower = 31 }
							}
							modifier = {
								factor = 4
								base_manpower = 31
								NOT = { base_manpower = 41 }
							}
							modifier = {
								factor = 5
								base_manpower = 41
								NOT = { base_manpower = 51 }
							}
							modifier = {
								factor = 6
								base_manpower = 51
								NOT = { base_manpower = 61 }
							}
							modifier = {
								factor = 7
								base_manpower = 61
								NOT = { base_manpower = 71 }
							}
							modifier = {
								factor = 8
								base_manpower = 71
								NOT = { base_manpower = 81 }
							}
							modifier = {
								factor = 9
								base_manpower = 81
								NOT = { base_manpower = 91 }
							}
							modifier = {
								factor = 10
								base_manpower = 91
							}
							#Do Nothing
						}
					}
				}
				else = {
					AN_mig_sub = yes
				}

				event_target:AN_resettle_target = {
					if = {
						limit = { base_manpower = 11 }
						random_list = {
							1 = {
								AN_mig_add = yes
							}
							1 = {
								modifier = {
									factor = 2
									base_manpower = 11
									NOT = { base_manpower = 21 }
								}
								modifier = {
									factor = 3
									base_manpower = 21
									NOT = { base_manpower = 31 }
								}
								modifier = {
									factor = 4
									base_manpower = 31
									NOT = { base_manpower = 41 }
								}
								modifier = {
									factor = 5
									base_manpower = 41
									NOT = { base_manpower = 51 }
								}
								modifier = {
									factor = 6
									base_manpower = 51
									NOT = { base_manpower = 61 }
								}
								modifier = {
									factor = 7
									base_manpower = 61
									NOT = { base_manpower = 71 }
								}
								modifier = {
									factor = 8
									base_manpower = 71
									NOT = { base_manpower = 81 }
								}
								modifier = {
									factor = 9
									base_manpower = 81
									NOT = { base_manpower = 91 }
								}
								modifier = {
									factor = 10
									base_manpower = 91
								}
								#Do Nothing
							}
						}
					}
					else = {
						AN_mig_add = yes
					}


					add_province_modifier = {
						name = AN_received_migrants
						duration = 730
						#hidden = yes
					}
				}

				add_base_manpower = -1
				add_base_tax = -1
				event_target:AN_resettle_target = {
					add_base_manpower = 1
					add_base_tax = 1
				}


				add_province_modifier = {
					name = AN_sent_migrants
					duration = 730
					#hidden = yes
				}

				clr_province_flag = AN_migration


				clear_global_event_target = AN_resettle_target
			}

			#RESET

			clear_global_event_target = AN_resettle_origin

			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_province_culture value = 0 }
				set_variable = { which = AN_minority_culture value = 0 }
				set_variable = { which = AN_secondary_culture value = 0 }
				set_variable = { which = AN_province_religion value = 0 }
				set_variable = { which = AN_minority_religion value = 0 }
				set_variable = { which = AN_secondary_religion value = 0 }
			}
		}
	}
}

AN_check_minorities = {
	AN_check_culture_minorities = yes
	AN_check_religion_minorities = yes
}

AN_religion_select_maj = {
	if = {
		limit = {
			check_variable = { which = AN_minority_religion_size value = 1 }
		}

		if = {
			limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } }
			if = {
				limit = { AN_linked_culture_religion_maj = yes }

				if = {
					limit = { AN_linked_culture_religion_min_maj = yes }

					if = {
						limit = { AN_linked_culture_religion_sec_maj = yes }
						random_list = {
							1 = {
								event_target:AN_DUMMY_PROV = {
									set_variable = { which = AN_province_religion which = PREV }
									set_variable = { which = AN_minority_religion which = AN_province_religion }
									set_variable = { which = AN_secondary_religion which = AN_province_religion }
								}
							}
							1 = {
								event_target:AN_DUMMY_PROV = {
									set_variable = { which = AN_minority_religion which = PREV }
									set_variable = { which = AN_province_religion which = AN_minority_religion }
									set_variable = { which = AN_secondary_religion which = AN_minority_religion }
								}
							}
							1 = {
								event_target:AN_DUMMY_PROV = {
									set_variable = { which = AN_secondary_religion which = PREV }
									set_variable = { which = AN_province_religion which = AN_secondary_religion }
									set_variable = { which = AN_minority_religion which = AN_secondary_religion }
								}
							}
						}
					}
					else = {
						random_list = {
							1 = {
								event_target:AN_DUMMY_PROV = {
									set_variable = { which = AN_province_religion which = PREV }
									set_variable = { which = AN_minority_religion which = AN_province_religion }
									set_variable = { which = AN_secondary_religion which = AN_province_religion }
								}
							}
							1 = {
								event_target:AN_DUMMY_PROV = {
									set_variable = { which = AN_minority_religion which = PREV }
									set_variable = { which = AN_province_religion which = AN_minority_religion }
									set_variable = { which = AN_secondary_religion which = AN_minority_religion }
								}
							}
						}
					}
				}

				else_if = {
					limit = { AN_linked_culture_religion_sec_maj = yes }
					random_list = {
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}

				else = {
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_religion which = PREV }
						set_variable = { which = AN_minority_religion which = AN_province_religion }
						set_variable = { which = AN_secondary_religion which = AN_province_religion }
					}
				}
			}
		}
		else = {
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } }
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						6 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
			}
		}
	}

	else = {
		event_target:AN_DUMMY_PROV = {
			set_variable = { which = AN_province_religion which = PREV }
			set_variable = { which = AN_minority_religion which = AN_province_religion }
		}
	}
}

AN_religion_select_min = {
	if = {
		limit = {
			check_variable = { which = AN_minority_religion_size value = 1 }
		}

		if = {
			limit = { AN_linked_culture_religion_min = yes }

			if = {
				limit = { AN_linked_culture_religion_maj_min = yes }

				if = {
					limit = { AN_linked_culture_religion_sec_min = yes }
					random_list = {
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
			}

			else_if = {
				limit = { AN_linked_culture_religion_sec_min = yes }
				random_list = {
					1 = {
						event_target:AN_DUMMY_PROV = {
							set_variable = { which = AN_minority_religion which = PREV }
							set_variable = { which = AN_province_religion which = AN_minority_religion }
							set_variable = { which = AN_secondary_religion which = AN_minority_religion }
						}
					}
					1 = {
						event_target:AN_DUMMY_PROV = {
							set_variable = { which = AN_secondary_religion which = PREV }
							set_variable = { which = AN_province_religion which = AN_secondary_religion }
							set_variable = { which = AN_minority_religion which = AN_secondary_religion }
						}
					}
				}
			}

			else = {
				event_target:AN_DUMMY_PROV = {
					set_variable = { which = AN_minority_religion which = PREV }
					set_variable = { which = AN_province_religion which = AN_minority_religion }
					set_variable = { which = AN_secondary_religion which = AN_minority_religion }
				}
			}
		}
		else = {
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } }
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						6 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
			}
		}
	}

	else = {
		event_target:AN_DUMMY_PROV = {
			set_variable = { which = AN_province_religion which = PREV }
			set_variable = { which = AN_minority_religion which = AN_province_religion }
		}
	}
}

AN_religion_select_sec = {
	if = {
		limit = {
			check_variable = { which = AN_minority_religion_size value = 1 }
		}

		else = {
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } }
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_secondary_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_secondary_religion }
								set_variable = { which = AN_minority_religion which = AN_secondary_religion }
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						4 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						3 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else_if = {
					limit = { is_variable_equal = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						5 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						2 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
				else = {
					random_list = {
						6 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_province_religion which = PREV }
								set_variable = { which = AN_minority_religion which = AN_province_religion }
								set_variable = { which = AN_secondary_religion which = AN_province_religion }
							}
						}
						1 = {
							event_target:AN_DUMMY_PROV = {
								set_variable = { which = AN_minority_religion which = PREV }
								set_variable = { which = AN_province_religion which = AN_minority_religion }
								set_variable = { which = AN_secondary_religion which = AN_minority_religion }
							}
						}
					}
				}
			}
		}
	}

	else = {
		event_target:AN_DUMMY_PROV = {
			set_variable = { which = AN_province_religion which = PREV }
			set_variable = { which = AN_minority_religion which = AN_province_religion }
		}
	}
}

AN_select_culture_religion = {
	if = { # HAS SECONDARY
		limit = {
			NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } }
		}
		#SELECT MAJ/MIN/SEC ORIGIN
		if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
			random_list = {
				3 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_majority_culture_0
								has_province_modifier = AN_enslaved_majority_culture_0
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_majority_culture_0
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_majority_culture_0
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_majority_culture_0
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_0
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_0
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_0
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				3 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_3
								has_province_modifier = AN_enslaved_minority_culture_3
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_3
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_minority_culture_3
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_minority_culture_3
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_3
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_3
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_3
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
			}
		}
		else_if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
			random_list = {
				4 = {
					trigger = {
						NOT = { has_province_modifier = AN_enslaved_majority_culture_1 }
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_primary_majority_culture_1
					}
					modifier = {
						factor = 1.75
						has_province_modifier = AN_unified_majority_culture_1
					}
					modifier = {
						factor = 1.5
						has_province_modifier = AN_accepted_majority_culture_1
					}
					modifier = {
						factor = 1.25
						has_province_modifier = AN_coexisting_majority_culture_1
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_1
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_1
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_1
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				2 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_enslaved_minority_culture_2
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_2
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_accepted_minority_culture_2
					}
					modifier = {
						factor = 1.25
						has_province_modifier = AN_coexisting_minority_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_2
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_2
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_2
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
				1 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_secondary_culture_2
								has_province_modifier = AN_enslaved_secondary_culture_2
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_secondary_culture_2
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_secondary_culture_2
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_secondary_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_secondary_culture_2
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_secondary_culture_2
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_secondary_culture_2
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_secondary_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_secondary_culture }
						set_variable = { which = AN_minority_culture which = AN_secondary_culture }
					}

					AN_religion_select_sec = yes
				}
			}
		}
		else_if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
			random_list = {
				5 = {
					trigger = {
						NOT = { has_province_modifier = AN_enslaved_majority_culture_2 }
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_primary_majority_culture_2
					}
					modifier = {
						factor = 2.5
						has_province_modifier = AN_unified_majority_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_accepted_majority_culture_2
					}
					modifier = {
						factor = 1.5
						has_province_modifier = AN_coexisting_majority_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_2
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_2
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_2
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				1 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_enslaved_minority_culture_1
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_1
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_minority_culture_1
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_minority_culture_1
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_1
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_1
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_1
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
				1 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_secondary_culture
								has_province_modifier = AN_enslaved_secondary_culture
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_secondary_culture
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_secondary_culture
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_secondary_culture
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_secondary_culture
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_secondary_culture
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_secondary_culture
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_secondary_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_secondary_culture }
						set_variable = { which = AN_minority_culture which = AN_secondary_culture }
					}

					AN_religion_select_sec = yes
				}
			}
		}
		else = {
			event_target:AN_DUMMY_PROV = {
				set_variable = { which = AN_province_culture which = PREV }
				set_variable = { which = AN_minority_culture which = AN_province_culture }
				set_variable = { which = AN_secondary_culture which = AN_province_culture }
			}
			AN_religion_select_maj = yes
		}
	}
	else = { #NO SECONDARY
		#SELECT MAJ/MIN ORIGIN
		if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
			random_list = {
				4 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_majority_culture_1
								has_province_modifier = AN_enslaved_majority_culture_1
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_majority_culture_1
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_majority_culture_1
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_majority_culture_1
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_1
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_1
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_1
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				3 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_3
								has_province_modifier = AN_enslaved_minority_culture_3
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_3
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_minority_culture_3
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_minority_culture_3
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_3
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_3
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_3
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
			}
		}
		else_if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
			random_list = {
				5 = {
					trigger = {
						NOT = { has_province_modifier = AN_enslaved_majority_culture_2 }
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_primary_majority_culture_2
					}
					modifier = {
						factor = 1.75
						has_province_modifier = AN_unified_majority_culture_2
					}
					modifier = {
						factor = 1.5
						has_province_modifier = AN_accepted_majority_culture_2
					}
					modifier = {
						factor = 1.25
						has_province_modifier = AN_coexisting_majority_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_2
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_2
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_2
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				2 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_2
								has_province_modifier = AN_enslaved_minority_culture_2
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_2
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_accepted_minority_culture_2
					}
					modifier = {
						factor = 1.25
						has_province_modifier = AN_coexisting_minority_culture_2
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_2
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_2
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_2
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
			}
		}
		else_if = {
			limit = { check_variable = { which = AN_minority_culture_size value = 1 } }
			random_list = {
				6 = {
					trigger = {
						NOT = { has_province_modifier = AN_enslaved_majority_culture_3 }
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_primary_majority_culture_3
					}
					modifier = {
						factor = 2.5
						has_province_modifier = AN_unified_majority_culture_3
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_accepted_majority_culture_3
					}
					modifier = {
						factor = 1.5
						has_province_modifier = AN_coexisting_majority_culture_3
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_majority_culture_3
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_majority_culture_3
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_majority_culture_3
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_province_culture which = PREV }
						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_secondary_culture which = AN_province_culture }
					}

					AN_religion_select_maj = yes
				}
				1 = {
					trigger = {
						NOT = {
							OR = {
								has_province_modifier = AN_primary_minority_culture_1
								has_province_modifier = AN_enslaved_minority_culture_1
							}
						}
					}
					modifier = {
						factor = 0.1
						has_province_modifier = AN_unified_minority_culture_1
					}
					modifier = {
						factor = 0.5
						has_province_modifier = AN_accepted_minority_culture_1
					}
					modifier = {
						factor = 0.75
						has_province_modifier = AN_coexisting_minority_culture_1
					}
					modifier = {
						factor = 2
						has_province_modifier = AN_protected_minority_culture_1
					}
					modifier = {
						factor = 3
						has_province_modifier = AN_non_accepted_minority_culture_1
					}
					modifier = {
						factor = 10
						has_province_modifier = AN_expelled_minority_culture_1
					}
					event_target:AN_DUMMY_PROV = {
						set_variable = { which = AN_minority_culture which = PREV }
						set_variable = { which = AN_province_culture which = AN_minority_culture }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					}

					AN_religion_select_min = yes
				}
			}
		}
		else = {
			event_target: = {
				set_variable = { which = AN_province_culture which = PREV }
				set_variable = { which = AN_minority_culture which = AN_province_culture }
				set_variable = { which = AN_secondary_culture which = AN_province_culture }
			}
			AN_religion_select_maj = yes
		}
	}
}

AN_mig_add = {
	if = {
		limit = { base_manpower = 5 }
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					random_list = {
						1 = {
							change_culture = variable:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
								AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
								AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
								AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
							}
							subtract_variable = { which = AN_minority_culture_size value = 1 }
						}
						1 = {
							subtract_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
				else = {
					set_variable = { which = AN_secondary_culture which = AN_minority_culture }
					set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }

					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
						AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
						AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
						AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
					}

					if = {
						limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
						change_variable = { which = AN_minority_culture_size value = 1 }
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:AN_minority_culture
					set_variable = {
						which = AN_minority_culture
						which = AN_province_culture
					}
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_culture value = 1 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_culture value = 0 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
					set_variable = { which = AN_secondary_culture value = 0 }
				}
				else = {
					subtract_variable = { which = AN_minority_culture_size value = 1 }
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = AN_target_culture value = 1 } }
					if = {
						limit = { is_variable_equal = { which = AN_target_culture which = AN_secondary_culture } }
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							random_list = {
								1 = {
									change_culture = variable:AN_minority_culture
									set_variable = {
										which = AN_minority_culture
										which = AN_province_culture
									}
									trigger_switch = {
										on_trigger = has_province_flag
										AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
										AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
										AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
										AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
										AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
										AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
										AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
										AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
									}
									subtract_variable = { which = AN_minority_culture_size value = 1 }
								}
								1 = {
									subtract_variable = { which = AN_minority_culture_size value = 1 }
								}
							}
						}
						else = {
							set_variable = { which = AN_secondary_culture which = AN_minority_culture }
							set_variable = { which = AN_minority_culture which = AN_target_culture }

							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
								AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
								AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
								AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
							}

							if = {
								limit = { NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
								change_variable = { which = AN_minority_culture_size value = 1 }
							}
						}
					}
					else_if = {
						limit = { is_variable_equal = { which = AN_target_culture which = AN_minority_culture } }
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
								AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
								AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
								AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else_if = {
						limit = { is_variable_equal = { which = AN_target_culture which = AN_province_culture } }
						if = {
							limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						else = {
							subtract_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
					else = {
						random_list = {
							1 = {
								change_variable = { which = AN_culture_progress value = 15 }
							}
							3 = {
								change_variable = { which = AN_culture_progress value = 20 }
							}
							1 = {
								change_variable = { which = AN_culture_progress value = 25 }
							}
						}
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
						subtract_variable = { which = AN_minority_culture_size value = 1 }
					}
					set_variable = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
					clr_province_flag = AN_int_sec
					clr_province_flag = AN_protect_sec
					clr_province_flag = AN_expel_sec
					clr_province_flag = AN_enslave_sec
				}
			}
			AN_check_culture_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } } }
			set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
			set_variable = { which = AN_minority_culture_size value = 1 }

			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						1 = {
							change_religion = variable:AN_minority_religion
							set_variable = {
								which = AN_minority_religion
								which = AN_province_religion
							}
							trigger_switch = {
								on_trigger = has_province_flag
								AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
								AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
								AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
								AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
							}
							subtract_variable = { which = AN_minority_religion_size value = 1 }
						}
						1 = {
							subtract_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					set_variable = { which = AN_secondary_religion which = AN_minority_religion }
					set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }

					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_sec = { clr_province_flag = AN_tolerate_sec set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_sec }
						AN_persecute_sec = { clr_province_flag = AN_persecute_sec set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_sec }
					}

					if = {
						limit = { NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
						change_variable = { which = AN_minority_religion_size value = 1 }
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }

				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }

					change_religion = variable:AN_minority_religion
					set_variable = {
						which = AN_minority_religion
						which = AN_province_religion
					}
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_religion value = 1 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_religion value = 0 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
					set_variable = { which = AN_secondary_religion value = 0 }
				}
				else = {
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
			}
			else = {
				set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
				set_variable = { which = AN_minority_religion_size value = 1 }
			}
			AN_check_religion_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } } }

			set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
			set_variable = { which = AN_minority_religion_size value = 1 }

			AN_check_religion_minorities = yes
		}
	}
	else_if = {
		limit = { base_manpower = 2 }
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				random_list = {
					1 = {
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
							AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
							AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
							AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
						}

						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_minority_culture_size value = 3 }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
							AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
							AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
							AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
						}

						change_culture = event_target:AN_DUMMY_PROV
					}
					1 = {
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
						set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }

						set_variable = { which = AN_minority_culture_size value = 3 }

						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
							AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
							AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
							AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
						}
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:AN_minority_culture
					set_variable = {
						which = AN_minority_culture
						which = AN_province_culture
					}
					subtract_variable = { which = AN_minority_culture_size value = 1 }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					change_culture = variable:AN_minority_culture
					set_variable = {
						which = AN_minority_culture
						which = AN_province_culture
					}
					change_variable = { which = AN_minority_culture_size value = 1 }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_culture_size value = 2 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_culture value = 1 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_culture value = 0 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
					set_variable = { which = AN_minority_culture value = 0 }
					set_variable = { which = AN_minority_culture_size value = 0 }
					set_variable = { which = AN_secondary_culture value = 0 }
				}
				else_if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } check_variable = { which = AN_minority_culture_size value = 2 } }
					random_list = {
						1 = {
							subtract_variable = { which = AN_minority_culture_size value = 1 }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						1 = {
							subtract_variable = { which = AN_minority_culture_size value = 2 }
						}
					}
				}
				else = {
					subtract_variable = { which = AN_minority_culture_size value = 2 }
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = AN_target_culture value = 1 } }
					if = {
						limit = { is_variable_equal = { which = AN_target_culture which = AN_secondary_culture } }
						random_list = {
							1 = {
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
								trigger_switch = {
									on_trigger = has_province_flag
									AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
									AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
									AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
									AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
									AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
									AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
									AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
									AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
								}

								set_variable = { which = AN_minority_culture which = AN_province_culture }
								set_variable = { which = AN_minority_culture_size value = 3 }
								trigger_switch = {
									on_trigger = has_province_flag
									AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
									AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
									AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
									AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
									AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
									AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
									AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
									AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
								}

								change_culture = variable:AN_target_culture
							}
							1 = {
								set_variable = { which = AN_secondary_culture which = AN_minority_culture }
								set_variable = { which = AN_minority_culture which = AN_target_culture }

								set_variable = { which = AN_minority_culture_size value = 3 }

								trigger_switch = {
									on_trigger = has_province_flag
									AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
									AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
									AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
									AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
									AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
									AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
									AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
									AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
								}
							}
						}
					}
					else_if = {
						limit = { is_variable_equal = { which = AN_target_culture which = AN_minority_culture } }
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
							change_culture = variable:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
							subtract_variable = { which = AN_minority_culture_size value = 1 }
							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
								AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
								AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
								AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
							}
						}
						else_if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
							change_culture = variable:AN_minority_culture
							set_variable = {
								which = AN_minority_culture
								which = AN_province_culture
							}
							change_variable = { which = AN_minority_culture_size value = 1 }
							trigger_switch = {
								on_trigger = has_province_flag
								AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
								AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
								AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
								AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
								AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
								AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
								AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
								AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
							}
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 2 }
						}
					}
					else_if = {
						limit = {
							is_variable_equal = { which = AN_target_culture which = AN_province_culture }
							OR = {
								AND = {
									check_variable = { which = AN_secondary_culture value = 1 }
									check_variable = { which = AN_minority_culture_size value = 1 }
								}
								AND = {
									is_variable_equal = { which = AN_secondary_culture value = 0 }
									check_variable = { which = AN_minority_culture_size value = 2 }
								}
							}
						}
						if = {
							limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 2 } } }
							set_variable = { which = AN_minority_culture value = 0 }
							set_variable = { which = AN_minority_culture_size value = 0 }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						else_if = {
							limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } check_variable = { which = AN_minority_culture_size value = 2 } }
							random_list = {
								1 = {
									subtract_variable = { which = AN_minority_culture_size value = 1 }
									set_variable = { which = AN_secondary_culture value = 0 }
								}
								1 = {
									subtract_variable = { which = AN_minority_culture_size value = 2 }
								}
							}
						}
						else = {
							subtract_variable = { which = AN_minority_culture_size value = 2 }
						}
					}
					else = {
						random_list = {
							1 = {
								change_variable = { which = AN_culture_progress value = 30 }
							}
							3 = {
								change_variable = { which = AN_culture_progress value = 40 }
							}
							1 = {
								change_variable = { which = AN_culture_progress value = 50 }
							}
						}
					}
				}
				else = {
					if = {
						limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
						subtract_variable = { which = AN_minority_culture_size value = 1 }
						set_variable = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
						clr_province_flag = AN_int_sec
						clr_province_flag = AN_protect_sec
						clr_province_flag = AN_expel_sec
						clr_province_flag = AN_enslave_sec

					}
					else = {
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
						}

						set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
						set_variable = { which = AN_minority_culture_size value = 2 }
					}
				}
			}
			AN_check_culture_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } } }
			set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
			set_variable = { which = AN_minority_culture_size value = 2 }

			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				random_list = {
					1 = {
						set_variable = { which = AN_secondary_religion which = AN_minority_religion }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_tolerate_sec = { clr_province_flag = AN_tolerate_sec set_province_flag = AN_tolerate_min }
							AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_sec }
							AN_persecute_sec = { clr_province_flag = AN_persecute_sec set_province_flag = AN_persecute_min }
							AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_sec }
						}

						set_variable = { which = AN_minority_religion which = AN_province_religion }
						set_variable = { which = AN_minority_religion_size value = 3 }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
							AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
							AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
							AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
						}

						change_religion = event_target:AN_DUMMY_PROV
					}
					1 = {
						set_variable = { which = AN_secondary_religion which = AN_minority_religion }
						set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }

						set_variable = { which = AN_minority_religion_size value = 3 }

						trigger_switch = {
							on_trigger = has_province_flag
							AN_tolerate_sec = { clr_province_flag = AN_tolerate_sec set_province_flag = AN_tolerate_min }
							AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_sec }
							AN_persecute_sec = { clr_province_flag = AN_persecute_sec set_province_flag = AN_persecute_min }
							AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_sec }
						}
					}
				}
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }

				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					change_religion = variable:AN_minority_religion
					set_variable = {
						which = AN_minority_religion
						which = AN_province_religion
					}
					subtract_variable = { which = AN_minority_religion_size value = 1 }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					change_religion = variable:AN_minority_religion
					set_variable = {
						which = AN_minority_religion
						which = AN_province_religion
					}
					change_variable = { which = AN_minority_religion_size value = 1 }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_religion_size value = 2 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_religion value = 1 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_religion value = 0 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}

					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } NOT = { check_variable = { which = AN_minority_religion_size value = 2 } } }
					set_variable = { which = AN_minority_religion value = 0 }
					set_variable = { which = AN_minority_religion_size value = 0 }
					set_variable = { which = AN_secondary_religion value = 0 }
				}
				else_if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } check_variable = { which = AN_minority_religion_size value = 2 } }
					random_list = {
						1 = {
							subtract_variable = { which = AN_minority_religion_size value = 1 }
							set_variable = { which = AN_secondary_religion value = 0 }
						}
						1 = {
							subtract_variable = { which = AN_minority_religion_size value = 2 }
						}
					}
				}
				else = {
					subtract_variable = { which = AN_minority_religion_size value = 2 }
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					subtract_variable = { which = AN_minority_religion_size value = 1 }
					set_variable = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV }
					clr_province_flag = AN_tolerate_sec
					clr_province_flag = AN_persecute_sec

				}
				else = {
					set_variable = { which = AN_secondary_religion which = AN_minority_religion }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_sec }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_sec }
					}

					set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
					set_variable = { which = AN_minority_religion_size value = 2 }
				}
			}
			AN_check_religion_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } } }

			set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
			set_variable = { which = AN_minority_religion_size value = 2 }

			AN_check_religion_minorities = yes

		}
	}
	else = {
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_culture which = AN_minority_culture }
				trigger_switch = {
					on_trigger = has_province_flag
					AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
					AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
					AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
					AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
					AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
					AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
					AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
					AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
				}

				set_variable = { which = AN_minority_culture which = AN_province_culture }
				set_variable = { which = AN_minority_culture_size value = 3 }
				trigger_switch = {
					on_trigger = has_province_flag
					AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
					AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
					AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
					AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
					AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
					AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
					AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
					AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
				}

				change_culture = event_target:AN_DUMMY_PROV
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				change_culture = variable:AN_minority_culture
				set_variable = {
					which = AN_minority_culture
					which = AN_province_culture
				}
				trigger_switch = {
					on_trigger = has_province_flag
					AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
					AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
					AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
					AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
					AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
					AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
					AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
					AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
				}
				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }

					subtract_variable = { which = AN_minority_culture_size value = 2 }
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					#Do Nothing
				}
				else = {
					change_variable = { which = AN_minority_culture_size value = 2 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_culture value = 1 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_culture value = 0 }
							check_variable = { which = AN_minority_culture_size value = 1 }
						}
					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 3 } } }
					set_variable = { which = AN_minority_culture value = 0 }
					set_variable = { which = AN_minority_culture_size value = 0 }
					set_variable = { which = AN_secondary_culture value = 0 }
				}
				else_if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } check_variable = { which = AN_minority_culture_size value = 3 } }
					random_list = {
						1 = {
							subtract_variable = { which = AN_minority_culture_size value = 2 }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						1 = {
							subtract_variable = { which = AN_minority_culture_size value = 3 }
						}
					}
				}
				else = {
					subtract_variable = { which = AN_minority_culture_size value = 3 }
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = AN_target_culture value = 1 } }
					if = {
						limit = { is_variable_equal = { which = AN_secondary_culture which = AN_target_culture } }
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_sec = { clr_province_flag = AN_int_sec set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
							AN_protect_sec = { clr_province_flag = AN_protect_sec set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
							AN_expel_sec = { clr_province_flag = AN_expel_sec set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
							AN_enslave_sec = { clr_province_flag = AN_enslave_sec set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
						}

						set_variable = { which = AN_minority_culture which = AN_province_culture }
						set_variable = { which = AN_minority_culture_size value = 3 }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
							AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
							AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
							AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
						}

						change_culture = variable:AN_target_culture
					}
					else_if = {
						limit = { is_variable_equal = { which = AN_minority_culture which = AN_target_culture } }
						change_culture = variable:AN_minority_culture
						set_variable = {
							which = AN_minority_culture
							which = AN_province_culture
						}
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
							AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
							AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
							AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
						}
						if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 3 } }

							subtract_variable = { which = AN_minority_culture_size value = 2 }
						}
						else_if = {
							limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
							#Do Nothing
						}
						else = {
							change_variable = { which = AN_minority_culture_size value = 2 }
						}
					}
					else_if = {
						limit = {
							is_variable_equal = { which = AN_province_culture which = AN_target_culture }
							OR = {
								AND = {
									check_variable = { which = AN_secondary_culture value = 1 }
									check_variable = { which = AN_minority_culture_size value = 1 }
								}
								AND = {
									is_variable_equal = { which = AN_secondary_culture value = 0 }
									check_variable = { which = AN_minority_culture_size value = 1 }
								}
							}
						}
						if = {
							limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } NOT = { check_variable = { which = AN_minority_culture_size value = 3 } } }
							set_variable = { which = AN_minority_culture value = 0 }
							set_variable = { which = AN_minority_culture_size value = 0 }
							set_variable = { which = AN_secondary_culture value = 0 }
						}
						else_if = {
							limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } check_variable = { which = AN_minority_culture_size value = 3 } }
							random_list = {
								1 = {
									subtract_variable = { which = AN_minority_culture_size value = 2 }
									set_variable = { which = AN_secondary_culture value = 0 }
								}
								1 = {
									subtract_variable = { which = AN_minority_culture_size value = 3 }
								}
							}
						}
						else = {
							subtract_variable = { which = AN_minority_culture_size value = 3 }
						}
					}
					else = {
						random_list = {
							1 = {
								change_variable = { which = AN_culture_progress value = 45 }
							}
							3 = {
								change_variable = { which = AN_culture_progress value = 60 }
							}
							1 = {
								change_variable = { which = AN_culture_progress value = 75 }
							}
						}

					}
				}
				else = {
					if = {
						limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
						subtract_variable = { which = AN_minority_culture_size value = 2 }
						set_variable = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV }
						clr_province_flag = AN_int_sec
						clr_province_flag = AN_protect_sec
						clr_province_flag = AN_expel_sec
						clr_province_flag = AN_enslave_sec

					}
					else = {
						set_variable = { which = AN_secondary_culture which = AN_minority_culture }
						trigger_switch = {
							on_trigger = has_province_flag
							AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
							AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
							AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
							AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
						}

						set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
						set_variable = { which = AN_minority_culture_size value = 3 }
					}
				}
			}
			AN_check_culture_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } } }
			random_list = {
				1 = {
					set_variable = { which = AN_minority_culture which = AN_province_culture }
					set_variable = { which = AN_minority_culture_size value = 3 }
					set_variable = { which = AN_province_culture which = event_target:AN_DUMMY_PROV }
					change_culture = variable:AN_province_culture

					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				1 = {
					set_variable = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV }
					set_variable = { which = AN_minority_culture_size value = 3 }
				}
			}

			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_religion which = AN_minority_religion }
				trigger_switch = {
					on_trigger = has_province_flag
					AN_tolerate_sec = { clr_province_flag = AN_tolerate_sec set_province_flag = AN_tolerate_min }
					AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_sec }
					AN_persecute_sec = { clr_province_flag = AN_persecute_sec set_province_flag = AN_persecute_min }
					AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_sec }
				}

				set_variable = { which = AN_minority_religion which = AN_province_religion }
				set_variable = { which = AN_minority_religion_size value = 3 }
				trigger_switch = {
					on_trigger = has_province_flag
					AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
					AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
					AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
					AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
				}

				change_religion = event_target:AN_DUMMY_PROV
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }

				change_religion = variable:AN_minority_religion
				set_variable = {
					which = AN_minority_religion
					which = AN_province_religion
				}
				trigger_switch = {
					on_trigger = has_province_flag
					AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
					AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
					AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
					AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
				}
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }

					subtract_variable = { which = AN_minority_religion_size value = 2 }
				}
				else_if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }
					#Do Nothing
				}
				else = {
					change_variable = { which = AN_minority_religion_size value = 2 }
				}
			}
			else_if = {
				limit = {
					is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
					OR = {
						AND = {
							check_variable = { which = AN_secondary_religion value = 1 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}
						AND = {
							is_variable_equal = { which = AN_secondary_religion value = 0 }
							check_variable = { which = AN_minority_religion_size value = 1 }
						}
					}
				}
				if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } NOT = { check_variable = { which = AN_minority_religion_size value = 3 } } }
					set_variable = { which = AN_minority_religion value = 0 }
					set_variable = { which = AN_minority_religion_size value = 0 }
					set_variable = { which = AN_secondary_religion value = 0 }
				}
				else_if = {
					limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } check_variable = { which = AN_minority_religion_size value = 3 } }
					random_list = {
						1 = {
							subtract_variable = { which = AN_minority_religion_size value = 2 }
							set_variable = { which = AN_secondary_religion value = 0 }
						}
						1 = {
							subtract_variable = { which = AN_minority_religion_size value = 3 }
						}
					}
				}
				else = {
					subtract_variable = { which = AN_minority_religion_size value = 3 }
				}
			}
			else = {
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }
					subtract_variable = { which = AN_minority_religion_size value = 2 }
					set_variable = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV }
					clr_province_flag = AN_int_sec
					clr_province_flag = AN_protect_sec
					clr_province_flag = AN_expel_sec
					clr_province_flag = AN_enslave_sec

				}
				else = {
					set_variable = { which = AN_secondary_religion which = AN_minority_religion }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_sec }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_sec }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_sec }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_sec }
					}

					set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
					set_variable = { which = AN_minority_religion_size value = 3 }
				}
			}
			AN_check_religion_minorities = yes
		}
		else_if = {
			limit = { NOT = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } } }

			random_list = {
				1 = {
					set_variable = { which = AN_minority_religion which = AN_province_religion }
					set_variable = { which = AN_minority_religion_size value = 3 }
					set_variable = { which = AN_province_religion which = event_target:AN_DUMMY_PROV }
					change_religion = variable:AN_province_religion

					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
				}
				1 = {
					set_variable = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV }
					set_variable = { which = AN_minority_religion_size value = 3 }
				}
			}

			AN_check_religion_minorities = yes
		}
	}
}

AN_mig_sub = {
	if = {
		limit = { base_manpower = 5 }
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_culture value = 0 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				subtract_variable = { which = AN_minority_culture_size value = 1 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }

				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 3 } }
					change_culture = variable:AN_minority_culture
					set_variable = {
						which = AN_minority_culture
						which = AN_province_culture
					}
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_culture_size value = 1 }
				}
			}
			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_religion value = 0 }

			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }
				subtract_variable = { which = AN_minority_religion_size value = 1 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 3 } }

					change_religion = variable:AN_minority_religion
					set_variable = {
						which = AN_minority_religion
						which = AN_province_religion
					}
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_religion_size value = 1 }
				}
			}
			AN_check_religion_minorities = yes
		}
	}
	else_if = {
		limit = { base_manpower = 2 }
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_culture value = 0 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				subtract_variable = { which = AN_minority_culture_size value = 2 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }

				if = {
					limit = { check_variable = { which = AN_minority_culture_size value = 2 } }
					change_culture = variable:AN_minority_culture
					set_variable = {
						which = AN_minority_culture
						which = AN_province_culture
					}
					subtract_variable = { which = AN_minority_culture_size value = 1 }
					trigger_switch = {
						on_trigger = has_province_flag
						AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
						AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
						AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
						AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
						AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
						AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
						AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
						AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
					}
				}
				else = {
					change_variable = { which = AN_minority_culture_size value = 2 }
				}
			}
			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_religion value = 0 }

			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }
				subtract_variable = { which = AN_minority_religion_size value = 2 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
				if = {
					limit = { check_variable = { which = AN_minority_religion_size value = 2 } }

					change_religion = variable:AN_minority_religion
					set_variable = {
						which = AN_minority_religion
						which = AN_province_religion
					}
					trigger_switch = {
						on_trigger = has_province_flag
						AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
						AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
						AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
						AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
					}
					subtract_variable = { which = AN_minority_religion_size value = 1 }
				}
				else = {
					change_variable = { which = AN_minority_religion_size value = 2 }
				}
			}
			AN_check_religion_minorities = yes
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { which = AN_minority_culture_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_culture value = 0 } } is_variable_equal = { which = AN_secondary_culture which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_culture value = 0 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_culture which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_minority_culture_size value = 0 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_culture which = event_target:AN_DUMMY_PROV } }
				change_culture = variable:AN_minority_culture
				set_variable = {
					which = AN_minority_culture
					which = AN_province_culture
				}
				trigger_switch = {
					on_trigger = has_province_flag
					AN_int_maj = { clr_province_flag = AN_int_maj set_province_flag = AN_int_min }
					AN_int_min = { clr_province_flag = AN_int_min set_province_flag = AN_int_maj }
					AN_protect_maj = { clr_province_flag = AN_protect_maj set_province_flag = AN_protect_min }
					AN_protect_min = { clr_province_flag = AN_protect_min set_province_flag = AN_protect_maj }
					AN_expel_maj = { clr_province_flag = AN_expel_maj set_province_flag = AN_expel_min }
					AN_expel_min = { clr_province_flag = AN_expel_min set_province_flag = AN_expel_maj }
					AN_enslave_maj = { clr_province_flag = AN_enslave_maj set_province_flag = AN_enslave_min }
					AN_enslave_min = { clr_province_flag = AN_enslave_min set_province_flag = AN_enslave_maj }
				}
			}
			AN_check_culture_minorities = yes
		}
		###
		if = {
			limit = {
				check_variable = { which = AN_minority_religion_size value = 1 }
			}
			if = {
				limit = { NOT = { is_variable_equal = { which = AN_secondary_religion value = 0 } } is_variable_equal = { which = AN_secondary_religion which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_secondary_religion value = 0 }

			}
			else_if = {
				limit = { is_variable_equal = { which = AN_minority_religion which = event_target:AN_DUMMY_PROV } }
				set_variable = { which = AN_minority_religion_size value = 0 }
			}
			else_if = {
				limit = { is_variable_equal = { which = AN_province_religion which = event_target:AN_DUMMY_PROV } }
				change_religion = variable:AN_minority_religion
				set_variable = {
					which = AN_minority_religion
					which = AN_province_religion
				}
				trigger_switch = {
					on_trigger = has_province_flag
					AN_tolerate_maj = { clr_province_flag = AN_tolerate_maj set_province_flag = AN_tolerate_min }
					AN_tolerate_min = { clr_province_flag = AN_tolerate_min set_province_flag = AN_tolerate_maj }
					AN_persecute_maj = { clr_province_flag = AN_persecute_maj set_province_flag = AN_persecute_min }
					AN_persecute_min = { clr_province_flag = AN_persecute_min set_province_flag = AN_persecute_maj }
				}
			}
			AN_check_religion_minorities = yes
		}
	}
}

#FORESTS
AN_chop_forest_effect = {
	if = {
		limit = { has_province_modifier = $TYPE$_3 }
		if = {
			limit = { owner = { treasury = 150 } }
			owner = { add_treasury = -150 }
			remove_province_modifier = $TYPE$_3
			add_permanent_province_modifier = {
				name = $TYPE$_2
				duration = -1
			}
			add_permanent_province_modifier = {
				name = $TYPE$_chopped
				duration = 3650
			}
		}
		else = {
			custom_tooltip = IR_CENSUS_CANNOT_AFFORD
			tooltip = {
				owner = { add_treasury = -150 }
				remove_province_modifier = $TYPE$_3
				add_permanent_province_modifier = {
					name = $TYPE$_2
					duration = -1
				}
				add_permanent_province_modifier = {
					name = $TYPE$_chopped
					duration = 3650
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
	else_if = {
		limit = { has_province_modifier = $TYPE$_2 }
		if = {
			limit = { owner = { treasury = 100 } }
			owner = { add_treasury = -100 }
			remove_province_modifier = $TYPE$_2
			add_permanent_province_modifier = {
				name = $TYPE$_1
				duration = -1
			}
			add_permanent_province_modifier = {
				name = $TYPE$_chopped
				duration = 3650
			}
		}
		else = {
			custom_tooltip = IR_CENSUS_CANNOT_AFFORD
			tooltip = {
				owner = { add_treasury = -100 }
				remove_province_modifier = $TYPE$_2
				add_permanent_province_modifier = {
					name = $TYPE$_1
					duration = -1
				}
				add_permanent_province_modifier = {
					name = $TYPE$_chopped
					duration = 3650
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
	else_if = {
		limit = { has_province_modifier = $TYPE$_1 }
		if = {
			limit = { owner = { treasury = 50 } }
			owner = { add_treasury = -50 }
			remove_province_modifier = $TYPE$_1
			add_permanent_province_modifier = {
				name = $TYPE$_cleared
				duration = 1825
			}
			add_permanent_province_modifier = {
				name = $TYPE$_chopped
				duration = 3650
			}
			set_province_flag = $TYPE$_residual
		}
		else = {
			if = {
				limit = { owner = { NOT = { treasury = 50 } } }
				custom_tooltip = IR_CENSUS_CANNOT_AFFORD
				tooltip = {
					owner = { add_treasury = -50 }
					remove_province_modifier = $TYPE$_1
					add_permanent_province_modifier = {
						name = $TYPE$_cleared
						duration = 1825
					}
					add_permanent_province_modifier = {
						name = $TYPE$_chopped
						duration = 3650
					}
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
}

AN_reforest_effect = {
	if = {
		limit = { has_province_modifier = $TYPE$_2 }
		if = {
			limit = { owner = { treasury = 200 } }
			owner = { add_treasury = -200 }
			remove_province_modifier = $TYPE$_2
			add_permanent_province_modifier = {
				name = $TYPE$_3
				duration = -1
			}
		}
		else = {
			custom_tooltip = IR_CENSUS_CANNOT_AFFORD
			tooltip = {
				owner = { add_treasury = -200 }
				remove_province_modifier = $TYPE$_2
				add_permanent_province_modifier = {
					name = $TYPE$_3
					duration = -1
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
	else_if = {
		limit = { has_province_modifier = $TYPE$_1 }
		if = {
			limit = { owner = { treasury = 150 } }
			owner = { add_treasury = -150 }
			remove_province_modifier = $TYPE$_1
			add_permanent_province_modifier = {
				name = $TYPE$_2
				duration = -1
			}
		}
		else = {
			custom_tooltip = IR_CENSUS_CANNOT_AFFORD
			tooltip = {
				owner = { add_treasury = -150 }
				remove_province_modifier = $TYPE$_1
				add_permanent_province_modifier = {
					name = $TYPE$_2
					duration = -1
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
	else_if = {
		limit = { has_province_flag = $TYPE$_residual }
		if = {
			limit = { owner = { treasury = 25 } }
			owner = { add_treasury = -25 }
			clr_province_flag = $TYPE$_residual
			add_permanent_province_modifier = {
				name = $TYPE$_1
				duration = -1
			}
		}
		else = {
			custom_tooltip = IR_CENSUS_CANNOT_AFFORD
			tooltip = {
				owner = { add_treasury = -25 }
				clr_province_flag = $TYPE$_residual
				add_permanent_province_modifier = {
					name = $TYPE$_1
					duration = -1
				}
			}
			hidden_effect = { province_event = { id = census.1 days = 0 } }
		}
	}
	else = {
		if = {
			limit = { has_province_modifier = $TYPE$_3 }
			custom_tooltip = IR_CENSUS_CANNOT_REFOREST
		}
		hidden_effect = { province_event = { id = census.1 days = 0 } }
	}
}